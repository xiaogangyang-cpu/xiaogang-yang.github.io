<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹æ¨¡æ‹Ÿå™¨ v2.3</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        :root {
            --primary-blue: #0a1f44;
            --accent-blue: #00d4ff;
            --accent-purple: #7b42f6;
            --success-green: #00e676;
            --warning-orange: #ff9100;
            --danger-red: #ff4081;
            --bg-dark: #0c1220;
            --card-bg: rgba(18, 28, 52, 0.9);
            --text-color: #e0e0ff;
            --text-secondary: #a0a8d6;
            --residue-color: #8B4513;
            --clean-color: #00f2ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(28, 58, 173, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(123, 66, 246, 0.1) 0%, transparent 20%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            max-width: 1200px;
            width: 100%;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 212, 255, 0.1);
            margin-bottom: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .logo-icon {
            font-size: 2rem;
            color: var(--accent-blue);
            text-shadow: 0 0 15px rgba(0, 212, 255, 0.7);
        }

        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* æ¸¸æˆä¸»ç•Œé¢ */
        .game-section {
            display: none;
        }

        .game-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ç¬¬ä¸€å…³ï¼šå‚æ•°è°ƒæ•´ */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .controls-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .control-group {
            background: rgba(12, 18, 32, 0.7);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid var(--accent-blue);
        }

        .control-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .control-label {
            font-size: 1rem;
            color: var(--text-color);
            font-weight: 600;
        }

        .control-value {
            font-size: 1.1rem;
            color: var(--accent-blue);
            font-weight: 700;
            font-family: monospace;
        }

        .slider-container {
            width: 100%;
            position: relative;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: var(--accent-blue);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.8);
            border: 2px solid white;
        }

        .param-explanation {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 8px;
            line-height: 1.4;
        }

        /* å¯è§†åŒ–åŒºåŸŸ */
        .visualization-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .pore-visualization-container {
            background: #050a10;
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            padding: 20px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .pore-title {
            font-size: 0.9rem;
            color: var(--accent-blue);
            margin-bottom: 10px;
            text-align: center;
        }

        .pore-diagram-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 140px;
        }

        .pore-diagram {
            width: 45%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #poreCanvas {
            width: 100%;
            height: 80%;
            image-rendering: pixelated;
        }

        .diagram-label {
            font-size: 0.8rem;
            color: var(--accent-blue);
            opacity: 0.8;
            margin-top: 5px;
        }

        .concentration-profile {
            width: 50%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #concentrationCanvas {
            width: 100%;
            height: 80%;
        }

        .residue-indicator {
            background: rgba(12, 18, 32, 0.7);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(0, 212, 255, 0.2);
            height: 90px;
        }

        .residue-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .residue-visual {
            width: 100%;
            height: 40px;
            border-radius: 8px;
            background-color: var(--residue-color);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            transition: background-color 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .residue-texture {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 2px, transparent 3px),
                radial-gradient(circle at 60% 70%, rgba(255,255,255,0.1) 2px, transparent 3px);
            background-size: 20px 20px;
        }

        .chart-container {
            background: rgba(12, 18, 32, 0.7);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(0, 212, 255, 0.1);
            height: 250px;
        }

        /* ç¬¬äºŒå…³ï¼šæµ‹è¯•æŒ‘æˆ˜ */
        .challenge-container {
            background: rgba(12, 18, 32, 0.7);
            border-radius: 10px;
            padding: 25px;
            border: 1px solid rgba(123, 66, 246, 0.3);
            margin-top: 20px;
        }

        .challenge-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .challenge-icon {
            font-size: 1.5rem;
            color: var(--accent-purple);
        }

        .challenge-title {
            font-size: 1.4rem;
            color: var(--text-color);
        }

        .questions-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .question-box {
            background: rgba(10, 25, 47, 0.9);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid var(--accent-purple);
        }

        .question-text {
            font-size: 1.1rem;
            color: var(--text-color);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 15px;
        }

        .answer-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-blue);
        }

        .answer-option.selected {
            background: rgba(0, 212, 255, 0.15);
            border-color: var(--accent-blue);
        }

        .answer-feedback {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            display: none;
        }

        .answer-feedback.show {
            display: block;
        }

        .answer-feedback.correct {
            border-left: 4px solid var(--success-green);
        }

        .answer-feedback.incorrect {
            border-left: 4px solid var(--danger-red);
        }

        .feedback-content {
            line-height: 1.6;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--accent-blue);
        }

        /* ç¬¬ä¸‰å…³ï¼šå·¥ç¨‹å¸ˆè¯„çº§ */
        .rating-container {
            background: rgba(12, 18, 32, 0.7);
            border-radius: 10px;
            padding: 25px;
            border: 1px solid rgba(0, 230, 118, 0.3);
            margin-top: 20px;
        }

        .certificate {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(10, 31, 68, 0.9), rgba(123, 66, 246, 0.2));
            border-radius: 15px;
            border: 2px solid rgba(0, 212, 255, 0.3);
        }

        .certificate-icon {
            font-size: 3rem;
            color: var(--accent-blue);
            margin-bottom: 15px;
        }

        .certificate-title {
            font-size: 1.8rem;
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .engineer-level {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, #ffd700, #ff9100);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 15px 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .radar-chart-container {
            height: 350px;
            margin: 30px 0;
        }

        .scores-breakdown {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .score-item {
            background: rgba(10, 25, 47, 0.9);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border-top: 4px solid var(--accent-blue);
        }

        .score-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .score-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-color);
        }

        .recommendations {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
        }

        .recommendations h3 {
            color: var(--accent-blue);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendations ul {
            padding-left: 20px;
            line-height: 1.7;
        }

        .recommendations li {
            margin-bottom: 10px;
            color: var(--text-secondary);
        }

        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-purple), #3a0ca3);
            color: white;
        }

        .btn-secondary {
            background: rgba(0, 212, 255, 0.1);
            color: var(--accent-blue);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-green), #00b248);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-orange), #ff6d00);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        footer {
            text-align: center;
            padding: 20px 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            width: 100%;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
        }

        /* çŠ¶æ€ä¿¡æ¯ */
        .status-message {
            padding: 15px;
            background: rgba(0, 40, 80, 0.3);
            border-radius: 8px;
            border-left: 4px solid var(--accent-blue);
            margin-top: 20px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .questions-container {
                grid-template-columns: 1fr;
            }
            
            .scores-breakdown {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .game-container {
                padding: 15px;
            }
            
            .control-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .scores-breakdown {
                grid-template-columns: 1fr;
            }
            
            .pore-diagram-container {
                flex-direction: column;
                height: auto;
            }
            
            .pore-diagram, .concentration-profile {
                width: 100%;
                height: 150px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-filter"></i>
                </div>
                <h1>å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹æ¨¡æ‹Ÿå™¨</h1>
            </div>
            <p class="subtitle">åŸºäºè²å…‹æ‰©æ•£å®šå¾‹çš„å­”é“è¯•å‰‚æ®‹ç•™æ¸…é™¤å·¥è‰ºä¼˜åŒ–ï¼Œæ¢ç´¢ä¼ è´¨è¿‡ç¨‹çš„æ ¸å¿ƒå·¥ç¨‹åŸç†</p>
        </header>

        <!-- ç¬¬ä¸€å…³ï¼šå‚æ•°è°ƒæ•´ -->
        <div id="section-parameters" class="game-section active">
            <div class="main-layout">
                <div class="controls-panel">
                    <div class="control-group">
                        <div class="control-title">
                            <span class="control-label">æ‰©æ•£ç³»æ•° D</span>
                            <span class="control-value" id="d-val">1.0 Ã— 10â»â¹ mÂ²/s</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="param-D" min="0.1" max="10" step="0.1" value="1">
                        </div>
                        <div class="param-explanation">
                            è¯•å‰‚åˆ†å­åœ¨æ¸…æ´—æ¶²ä¸­çš„æ‰©æ•£èƒ½åŠ›ã€‚å€¼è¶Šé«˜ï¼Œåˆ†å­ç§»åŠ¨è¶Šå¿«ï¼Œæ®‹ç•™æ¸…é™¤è¶Šè¿…é€Ÿï¼ˆèŒƒå›´ï¼š0.1-10 Ã—10â»â¹ mÂ²/sï¼‰ã€‚
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="control-title">
                            <span class="control-label">å­”é“æ·±åº¦ L</span>
                            <span class="control-value" id="l-val">100 Î¼m</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="param-L" min="10" max="500" step="5" value="100">
                        </div>
                        <div class="param-explanation">
                            å­”é“çš„æ·±åº¦ï¼Œå†³å®šäº†æ®‹ç•™è¯•å‰‚éœ€è¦æ‰©æ•£çš„è·ç¦»ã€‚æ·±åº¦è¶Šå°ï¼Œæ¸…æ´—æ•ˆæœè¶Šå¥½ã€‚
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="control-title">
                            <span class="control-label">æ¸…æ´—æ—¶é—´ t</span>
                            <span class="control-value" id="t-val">60 s</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="param-T" min="10" max="600" step="10" value="60">
                        </div>
                        <div class="param-explanation">
                            æ¸…æ´—æ¶²ä¸å­”é“æ¥è§¦çš„æ—¶é—´ã€‚æ—¶é—´è¶Šé•¿ï¼Œæ‰©æ•£è¿‡ç¨‹è¶Šå……åˆ†ï¼Œæ®‹ç•™æ¸…é™¤è¶Šå½»åº•ã€‚
                        </div>
                    </div>

                    <div class="control-group" style="opacity: 0.8; border-left-color: #666;">
                        <div class="control-title">
                            <span class="control-label">å†²æ´—æµé€Ÿ u</span>
                            <span class="control-value" id="u-val">10 mm/s</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="param-U" min="1" max="200" step="1" value="10">
                        </div>
                        <div class="param-explanation">
                            æ¸…æ´—æ¶²çš„æµåŠ¨é€Ÿåº¦ã€‚åœ¨æ‰©æ•£æ§åˆ¶è¿‡ç¨‹ä¸­ï¼Œå•çº¯å¢åŠ æµé€Ÿå¯¹æ¸…é™¤æ·±å­”æ®‹ç•™æ•ˆæœæœ‰é™ã€‚
                        </div>
                    </div>

                    <div class="status-message" id="status-message">
                        è°ƒæ•´å‚æ•°ä»¥ä¼˜åŒ–å­”é“æ¸…æ´—æ•ˆæœã€‚è§‚å¯Ÿå­”é“æˆªé¢ä¸­çš„è¯•å‰‚æ®‹ç•™æµ“åº¦åˆ†å¸ƒå˜åŒ–ã€‚
                    </div>
                </div>

                <div class="visualization-area">
                    <div class="pore-visualization-container">
                        <div class="pore-title">å­”é“æˆªé¢ä¸æµ“åº¦åˆ†å¸ƒ</div>
                        <div class="pore-diagram-container">
                            <div class="pore-diagram">
                                <canvas id="poreCanvas" width="300" height="120"></canvas>
                                <div class="diagram-label">å­”é“æˆªé¢ç¤ºæ„å›¾</div>
                            </div>
                            <div class="concentration-profile">
                                <canvas id="concentrationCanvas" width="300" height="120"></canvas>
                                <div class="diagram-label">æ·±åº¦-æµ“åº¦åˆ†å¸ƒ</div>
                            </div>
                        </div>
                    </div>

                    <div class="residue-indicator">
                        <span class="residue-label">å½“å‰å­”åº•è¯•å‰‚æ®‹ç•™æµ“åº¦</span>
                        <div class="residue-visual" id="residue-visual">
                            <div class="residue-texture"></div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="residueChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="control-buttons">
                <button class="btn btn-primary" id="btn-test">
                    <i class="fas fa-flask"></i> è¿›å…¥å·¥ç¨‹æŒ‘æˆ˜
                </button>
                <button class="btn btn-secondary" id="btn-reset">
                    <i class="fas fa-redo"></i> é‡ç½®å‚æ•°
                </button>
            </div>
        </div>

        <!-- ç¬¬äºŒå…³ï¼šæµ‹è¯•æŒ‘æˆ˜ -->
        <div id="section-challenge" class="game-section">
            <div class="challenge-container">
                <div class="challenge-header">
                    <div class="challenge-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h2 class="challenge-title">ä¼ è´¨å·¥ç¨‹æ€ç»´æŒ‘æˆ˜</h2>
                </div>

                <div class="questions-container">
                    <div class="question-box" id="q1-box">
                        <div class="question-text">
                            1. åœ¨æ‰©æ•£æ§åˆ¶çš„å­”é“æ¸…æ´—è¿‡ç¨‹ä¸­ï¼Œå•çº¯æé«˜å†²æ´—æµé€Ÿ(u)æ˜¯å¦èƒ½æ˜¾è‘—æå‡æ·±å­”è¯•å‰‚æ®‹ç•™æ¸…é™¤æ•ˆç‡ï¼Ÿ
                        </div>
                        <div class="answer-options" id="q1-options">
                            <div class="answer-option" data-value="yes">æ˜¯çš„ï¼Œæµé€Ÿè¶Šé«˜æ¸…æ´—è¶Šå¿«</div>
                            <div class="answer-option" data-value="no">ä¸èƒ½ï¼Œæ·±å­”æ®‹ç•™æ¸…é™¤ä¸»è¦å—æ‰©æ•£æ§åˆ¶</div>
                            <div class="answer-option" data-value="depends">å–å†³äºå­”é“å°ºå¯¸å’Œå½¢çŠ¶</div>
                        </div>
                        <div class="answer-feedback" id="q1-feedback">
                            <div class="feedback-title">ğŸ“š æ ‡å‡†ç­”æ¡ˆä¸å·¥ç¨‹è§£é‡Š</div>
                            <div class="feedback-content">
                                <strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong> ä¸èƒ½ï¼Œæ·±å­”æ®‹ç•™æ¸…é™¤ä¸»è¦å—æ‰©æ•£æ§åˆ¶<br><br>
                                <strong>ä¼ è´¨åŸç†ï¼š</strong> 
                                æ ¹æ®è²å…‹ç¬¬äºŒå®šå¾‹ï¼Œå­”é“å†…éƒ¨çš„ä¼ è´¨è¿‡ç¨‹ç”±æ‰©æ•£ä¸»å¯¼ï¼Œå…¶ç‰¹å¾æ—¶é—´å°ºåº¦ä¸ºÏ„_diff = LÂ²/Dï¼Œè€Œå¯¹æµæ—¶é—´å°ºåº¦ä¸ºÏ„_conv = L/uã€‚
                                å½“Ï„_diff >> Ï„_convï¼ˆå³Peæ•°è¾ƒå¤§ï¼‰æ—¶ï¼Œå¢åŠ æµé€Ÿå¯¹å­”åº•ä¼ è´¨è´¡çŒ®æœ‰é™ã€‚<br><br>
                                <strong>å·¥ç¨‹å®è·µï¼š</strong> 
                                å¯¹äºæ·±å­”æ¸…æ´—ï¼ˆL > 50Î¼mï¼‰ï¼Œæ‰©æ•£æ§åˆ¶æ•ˆåº”æ˜¾è‘—ã€‚å•çº¯æé«˜æµé€Ÿå¯èƒ½å¢åŠ èƒ½è€—è€Œä¸æ˜¾è‘—æ”¹å–„æ¸…æ´—æ•ˆæœã€‚
                            </div>
                        </div>
                    </div>

                    <div class="question-box" id="q2-box">
                        <div class="question-text">
                            2. åœ¨ä¸æ”¹å˜æ‰©æ•£ç³»æ•°Dçš„æƒ…å†µä¸‹ï¼Œæœ€æœ‰æ•ˆçš„å¼ºåŒ–å­”é“æ¸…æ´—ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ
                        </div>
                        <div class="answer-options" id="q2-options">
                            <div class="answer-option" data-value="increase-u">æ— é™å¢å¤§å†²æ´—æµé€Ÿ</div>
                            <div class="answer-option" data-value="increase-t">æ— é™å»¶é•¿æ¸…æ´—æ—¶é—´</div>
                            <div class="answer-option" data-value="decrease-l">å‡å°æœ‰æ•ˆæ‰©æ•£è·ç¦»</div>
                            <div class="answer-option" data-value="combined">ç»¼åˆç­–ç•¥ï¼šä¼˜åŒ–å­”é“è®¾è®¡+åˆç†æ¸…æ´—æ—¶é—´</div>
                        </div>
                        <div class="answer-feedback" id="q2-feedback">
                            <div class="feedback-title">ğŸ“š æ ‡å‡†ç­”æ¡ˆä¸å·¥ç¨‹è§£é‡Š</div>
                            <div class="feedback-content">
                                <strong>æœ€ä½³ç­”æ¡ˆï¼š</strong> ç»¼åˆç­–ç•¥ï¼šä¼˜åŒ–å­”é“è®¾è®¡+åˆç†æ¸…æ´—æ—¶é—´<br><br>
                                <strong>ä¼ è´¨åˆ†æï¼š</strong> 
                                1. <strong>å‡å°æœ‰æ•ˆæ‰©æ•£è·ç¦»(L)</strong>ï¼šæ ¹æ®Ï„_diff âˆ LÂ²ï¼Œå‡å°Lå¯æ˜¾è‘—ç¼©çŸ­æ¸…æ´—æ—¶é—´ã€‚<br>
                                2. <strong>åˆç†æ¸…æ´—æ—¶é—´(t)</strong>ï¼šéœ€è¦t > Ï„_diffæ‰èƒ½å®ç°æœ‰æ•ˆæ¸…æ´—ã€‚<br>
                                3. <strong>ä¼˜åŒ–å­”é“å‡ ä½•</strong>ï¼šå‡å°æ·±å¾„æ¯”ã€å¢åŠ å­”å£å°ºå¯¸ã€æ”¹å–„æµåŠ¨åˆ†å¸ƒã€‚<br><br>
                                <strong>å·¥ç¨‹æƒè¡¡ï¼š</strong>
                                å®é™…å·¥ç¨‹ä¸­é‡‡ç”¨"è®¾è®¡ä¼˜åŒ–+å·¥è‰ºä¼˜åŒ–"çš„ç»¼åˆç­–ç•¥ï¼Œåœ¨æ•ˆç‡ã€èƒ½è€—ã€æ—¶é—´ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="btn btn-success" id="btn-submit-answers">
                        <i class="fas fa-check-circle"></i> æäº¤ç­”æ¡ˆæŸ¥çœ‹è§£æ
                    </button>
                    <button class="btn btn-secondary" id="btn-back-to-params">
                        <i class="fas fa-arrow-left"></i> è¿”å›å‚æ•°è°ƒæ•´
                    </button>
                    <button class="btn btn-primary" id="btn-next-to-rating" style="display: none;">
                        <i class="fas fa-chart-line"></i> æŸ¥çœ‹å·¥ç¨‹å¸ˆè¯„çº§
                    </button>
                </div>
            </div>
        </div>

        <!-- ç¬¬ä¸‰å…³ï¼šå·¥ç¨‹å¸ˆè¯„çº§ -->
        <div id="section-rating" class="game-section">
            <div class="rating-container">
                <div class="certificate">
                    <div class="certificate-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <h3 class="certificate-title">å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹èƒ½åŠ›è®¤è¯</h3>
                    <div class="engineer-level" id="engineer-level">è§ä¹ å·¥ç¨‹å¸ˆ</div>
                    <p class="subtitle" id="certificate-desc">
                        æ­¤è®¤è¯è¯æ˜æŒæœ‰äººå·²æŒæ¡å­”é“æ¸…æ´—ä¼ è´¨æ§åˆ¶çš„åŸºæœ¬åŸç†ï¼Œéœ€è¦åœ¨æŒ‡å¯¼ä¸‹å®Œæˆæ¸…æ´—å·¥è‰ºè®¾è®¡ä»»åŠ¡ã€‚
                    </p>
                </div>

                <div class="scores-breakdown">
                    <div class="score-item">
                        <div class="score-label">æ‰©æ•£æ§åˆ¶ç†è§£</div>
                        <div class="score-value" id="score-diffusion">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-label">å‚æ•°æ•æ„Ÿæ€§</div>
                        <div class="score-value" id="score-sensitivity">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-label">å·¥ç¨‹åˆ¤æ–­åŠ›</div>
                        <div class="score-value" id="score-judgment">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-label">å·¥è‰ºä¼˜åŒ–èƒ½åŠ›</div>
                        <div class="score-value" id="score-optimization">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-label">å®è·µåº”ç”¨èƒ½åŠ›</div>
                        <div class="score-value" id="score-practical">0</div>
                    </div>
                </div>

                <div class="radar-chart-container">
                    <canvas id="radarChart"></canvas>
                </div>

                <div class="recommendations">
                    <h3><i class="fas fa-lightbulb"></i> èƒ½åŠ›æå‡å»ºè®®</h3>
                    <ul id="recommendations-list">
                        <li>æ·±å…¥å­¦ä¹ è²å…‹å®šå¾‹åœ¨å¤šå­”ä»‹è´¨ä¼ è´¨ä¸­çš„åº”ç”¨</li>
                        <li>ç ”ç©¶ä¸åŒå­”é“å‡ ä½•å½¢çŠ¶å¯¹æ¸…æ´—æ•ˆç‡çš„å½±å“è§„å¾‹</li>
                        <li>å­¦ä¹ æ¸…æ´—å·¥è‰ºå‚æ•°çš„å¤šç›®æ ‡ä¼˜åŒ–æ–¹æ³•</li>
                        <li>äº†è§£å·¥ä¸šä¸­å¸¸ç”¨çš„ä¼ è´¨å¢å¼ºæŠ€æœ¯ï¼ˆå¦‚è¶…å£°ã€è„‰å†²å†²æ´—ï¼‰</li>
                        <li>æŒæ¡æ¸…æ´—éªŒè¯ä¸æ®‹ç•™æ£€æµ‹çš„æ ‡å‡†æ–¹æ³•</li>
                    </ul>
                </div>

                <div class="control-buttons">
                    <button class="btn btn-warning" id="btn-restart">
                        <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹æŒ‘æˆ˜
                    </button>
                    <button class="btn btn-secondary" id="btn-back-to-challenge">
                        <i class="fas fa-arrow-left"></i> è¿”å›æŒ‘æˆ˜
                    </button>
                </div>
            </div>
        </div>
    </div>



    <script>
        // æ¸¸æˆçŠ¶æ€ç®¡ç†
        const gameState = {
            currentSection: 'parameters',
            scores: {
                diffusionControl: 0,      // æ‰©æ•£æ§åˆ¶ç†è§£
                parameterSensitivity: 0,   // å‚æ•°æ•æ„Ÿæ€§
                engineeringJudgment: 0,    // å·¥ç¨‹åˆ¤æ–­åŠ›
                processOptimization: 0,    // å·¥è‰ºä¼˜åŒ–èƒ½åŠ›
                practicalApplication: 0    // å®è·µåº”ç”¨èƒ½åŠ›
            },
            userAnswers: {
                q1: null,
                q2: null
            },
            parameters: {
                D: 1.0,    // æ‰©æ•£ç³»æ•° (10^-9 mÂ²/s)
                L: 100,    // å­”é“æ·±åº¦ (Î¼m)
                t: 60,     // æ—¶é—´ (s)
                u: 10      // æµé€Ÿ (mm/s)
            },
            answersSubmitted: false
        };

        // åˆå§‹åŒ–Canvaså’ŒChart
        const poreCanvas = document.getElementById('poreCanvas');
        const poreCtx = poreCanvas.getContext('2d');
        const concCanvas = document.getElementById('concentrationCanvas');
        const concCtx = concCanvas.getContext('2d');
        const chartCtx = document.getElementById('residueChart').getContext('2d');
        
        let chart = new Chart(chartCtx, {
            type: 'line',
            data: {
                labels: [0, 10, 20, 30, 40, 50, 60],
                datasets: [{
                    label: 'è¯•å‰‚æ®‹ç•™ç‡ (%)',
                    borderColor: '#00d4ff',
                    backgroundColor: 'rgba(0, 212, 255, 0.1)',
                    data: [100, 80, 60, 40, 20, 10, 5],
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#00d4ff',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { 
                        min: 0, 
                        max: 100, 
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#a0a8d6' },
                        title: {
                            display: true,
                            text: 'æ®‹ç•™ç‡ (%)',
                            color: '#a0a8d6'
                        }
                    },
                    x: { 
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#a0a8d6' },
                        title: {
                            display: true,
                            text: 'æ¸…æ´—æ—¶é—´ (s)',
                            color: '#a0a8d6'
                        }
                    }
                },
                plugins: {
                    legend: { 
                        display: false 
                    },
                    tooltip: {
                        backgroundColor: 'rgba(10, 25, 47, 0.9)',
                        titleColor: '#00d4ff',
                        bodyColor: '#e0e0ff',
                        borderColor: '#00d4ff',
                        borderWidth: 1
                    }
                }
            }
        });

        // é¢œè‰²æ’å€¼å‡½æ•°
        function interpolateColor(color1, color2, factor) {
            const result = color1.slice();
            for (let i = 0; i < 3; i++) {
                result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));
            }
            return `rgb(${result[0]}, ${result[1]}, ${result[2]})`;
        }
        
        const residueRGB = [139, 69, 19];   // #8B4513
        const cleanRGB = [0, 242, 255];     // #00f2ff

        // ç»˜åˆ¶å­”é“æˆªé¢ç¤ºæ„å›¾
        function drawPoreDiagram(L, u) {
            const width = poreCanvas.width;
            const height = poreCanvas.height;
            poreCtx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶å­”é“èƒŒæ™¯
            const poreWidth = width * 0.6;
            const poreHeight = Math.min(height * 0.7, L / 500 * height * 1.5);
            const poreX = (width - poreWidth) / 2;
            const poreY = (height - poreHeight) / 2;
            
            // å­”é“å†…éƒ¨
            poreCtx.fillStyle = '#0a1f44';
            poreCtx.fillRect(poreX, poreY, poreWidth, poreHeight);
            
            // å­”é“å£
            poreCtx.strokeStyle = '#00d4ff';
            poreCtx.lineWidth = 2;
            poreCtx.strokeRect(poreX, poreY, poreWidth, poreHeight);
            
            // æ·±åº¦æ ‡è®°
            poreCtx.strokeStyle = '#666';
            poreCtx.setLineDash([2, 2]);
            poreCtx.beginPath();
            poreCtx.moveTo(poreX - 10, poreY);
            poreCtx.lineTo(poreX, poreY);
            poreCtx.moveTo(poreX - 10, poreY + poreHeight);
            poreCtx.lineTo(poreX, poreY + poreHeight);
            poreCtx.stroke();
            poreCtx.setLineDash([]);
            
            // æ·±åº¦æ–‡å­—
            poreCtx.fillStyle = '#00d4ff';
            poreCtx.font = '10px Arial';
            poreCtx.fillText(`${L} Î¼m`, poreX - 35, poreY + poreHeight/2);
            
            // æµé€ŸæŒ‡ç¤º
            const flowWidth = Math.min(poreWidth * 0.6, u * 0.3);
            poreCtx.fillStyle = `rgba(0, 212, 255, ${0.3 + u/400})`;
            poreCtx.fillRect(poreX + poreWidth/2 - flowWidth/2, poreY - 15, flowWidth, 8);
            
            // æµé€Ÿç®­å¤´
            poreCtx.fillStyle = '#00d4ff';
            poreCtx.beginPath();
            poreCtx.moveTo(poreX + poreWidth/2 + flowWidth/2, poreY - 11);
            poreCtx.lineTo(poreX + poreWidth/2 + flowWidth/2 - 5, poreY - 15);
            poreCtx.lineTo(poreX + poreWidth/2 + flowWidth/2 - 5, poreY - 7);
            poreCtx.closePath();
            poreCtx.fill();
            
            // å…¥å£å‡ºå£æ ‡è®°
            poreCtx.fillStyle = '#00d4ff';
            poreCtx.font = 'bold 9px Arial';
            poreCtx.fillText('å…¥å£', poreX + poreWidth/2 - 8, poreY - 5);
            poreCtx.fillText('å‡ºå£', poreX + poreWidth/2 - 8, poreY + poreHeight + 12);
            
            // æ·»åŠ å­”é“å†…éƒ¨æµåŠ¨çº¿
            poreCtx.strokeStyle = 'rgba(0, 212, 255, 0.3)';
            poreCtx.lineWidth = 1;
            
            // ç»˜åˆ¶å‡ æ¡æµåŠ¨çº¿è¡¨ç¤ºæ¸…æ´—æ¶²æµåŠ¨
            for (let i = 1; i <= 3; i++) {
                const lineY = poreY + (i * poreHeight / 4);
                poreCtx.beginPath();
                poreCtx.moveTo(poreX + 5, lineY);
                poreCtx.lineTo(poreX + poreWidth - 5, lineY);
                poreCtx.stroke();
            }
        }

        // ç»˜åˆ¶æµ“åº¦åˆ†å¸ƒå›¾
        function drawConcentrationProfile(D, L, t, actualResidue) {
            const width = concCanvas.width;
            const height = concCanvas.height;
            concCtx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            concCtx.strokeStyle = '#666';
            concCtx.lineWidth = 1;
            
            // Yè½´ (æµ“åº¦)
            concCtx.beginPath();
            concCtx.moveTo(30, 20);
            concCtx.lineTo(30, height - 20);
            concCtx.stroke();
            
            // Xè½´ (æ·±åº¦)
            concCtx.beginPath();
            concCtx.moveTo(30, height - 20);
            concCtx.lineTo(width - 20, height - 20);
            concCtx.stroke();
            
            // åæ ‡è½´æ ‡ç­¾
            concCtx.fillStyle = '#ffffff';
            concCtx.font = '9px Arial';
            concCtx.fillText('æµ“åº¦', 15, 15);
            concCtx.fillText('æ·±åº¦', width - 25, height - 10);
            
            // ç»˜åˆ¶æµ“åº¦æ›²çº¿
            const dataPoints = 20;
            const maxConcentration = actualResidue / 100;
            
            concCtx.beginPath();
            
            for (let i = 0; i <= dataPoints; i++) {
                const depth = i / dataPoints; // å½’ä¸€åŒ–æ·±åº¦ (0=å­”å£, 1=å­”åº•)
                // æµ“åº¦åˆ†å¸ƒï¼šä»å­”å£åˆ°å­”åº•å‘ˆæŒ‡æ•°è¡°å‡
                const concentration = maxConcentration * Math.exp(-depth * 3 * (1 - maxConcentration));
                
                const x = 30 + depth * (width - 50);
                const y = 20 + (1 - concentration) * (height - 40);
                
                if (i === 0) {
                    concCtx.moveTo(x, y);
                } else {
                    concCtx.lineTo(x, y);
                }
            }
            
            concCtx.strokeStyle = '#ff9100';
            concCtx.lineWidth = 2;
            concCtx.stroke();
            
            // å¡«å……æ›²çº¿ä¸‹æ–¹åŒºåŸŸ
            concCtx.lineTo(30 + (width - 50), 20 + (height - 40));
            concCtx.lineTo(30, 20 + (height - 40));
            concCtx.closePath();
            concCtx.fillStyle = 'rgba(255, 145, 0, 0.2)';
            concCtx.fill();
            
            // æ·»åŠ å½“å‰æ®‹ç•™ç‡æ ‡ç­¾
            concCtx.fillStyle = '#ff9100';
            concCtx.font = 'bold 10px Arial';
            concCtx.fillText(`æ®‹ç•™: ${actualResidue.toFixed(1)}%`, width - 70, 30);
            
            // æ·±åº¦æ ‡è®°
            concCtx.fillStyle = '#666';
            concCtx.font = '8px Arial';
            concCtx.fillText('å­”å£', 25, height - 15);
            concCtx.fillText('å­”åº•', width - 25, height - 15);
            
            // æµ“åº¦æ ‡è®°
            concCtx.fillText('1.0', 15, 25);
            concCtx.fillText('0', 15, height - 15);
        }

        // æ›´æ–°å‚æ•°æ˜¾ç¤ºå’Œè®¡ç®—
        function updateParameters() {
            const D = parseFloat(document.getElementById('param-D').value);
            const L = parseFloat(document.getElementById('param-L').value);
            const t = parseFloat(document.getElementById('param-T').value);
            const u = parseFloat(document.getElementById('param-U').value);

            // æ›´æ–°æ˜¾ç¤ºå€¼
            document.getElementById('d-val').textContent = `${D.toFixed(1)} Ã— 10â»â¹ mÂ²/s`;
            document.getElementById('l-val').textContent = `${L} Î¼m`;
            document.getElementById('t-val').textContent = `${t} s`;
            document.getElementById('u-val').textContent = `${u} mm/s`;

            // ä¿å­˜åˆ°æ¸¸æˆçŠ¶æ€
            gameState.parameters = { D, L, t, u };

            // è®¡ç®—æ®‹ç•™ç‡ - åŸºäºè²å…‹ç¬¬äºŒå®šå¾‹çš„ç®€åŒ–æ¨¡å‹
            // ç‰¹å¾æ‰©æ•£æ—¶é—´ï¼šÏ„ = LÂ² / D
            // Dä¸º10^-9é‡çº§ï¼ŒLä¸ºå¾®ç±³çº§ï¼Œéœ€è¦å•ä½è½¬æ¢
            const D_si = D * 1e-9; // è½¬æ¢ä¸º mÂ²/s (10^-9)
            const L_si = L * 1e-6; // è½¬æ¢ä¸º m
            const diffusionTime = (L_si * L_si) / D_si; // ç‰¹å¾æ‰©æ•£æ—¶é—´ (s)
            
            const k = 0.8;
            const actualResidue = Math.exp(-k * t / diffusionTime) * 100;
            
            // æ›´æ–°å›¾è¡¨
            const timePoints = [0, 10, 20, 30, 40, 50, 60, 90, 120];
            chart.data.labels = timePoints;
            chart.data.datasets[0].data = timePoints.map(time => 
                Math.min(100, Math.exp(-k * time / diffusionTime) * 100)
            );
            chart.update();

            // æ›´æ–°å­”é“ç¤ºæ„å›¾å’Œæµ“åº¦åˆ†å¸ƒ
            drawPoreDiagram(L, u);
            drawConcentrationProfile(D, L, t, actualResidue);

            // æ›´æ–°æ®‹ç•™æŒ‡ç¤ºå™¨é¢œè‰²
            const cleanFactor = (100 - actualResidue) / 100;
            const residueColor = interpolateColor(residueRGB, cleanRGB, cleanFactor);
            document.getElementById('residue-visual').style.backgroundColor = residueColor;

            // æ›´æ–°çŠ¶æ€ä¿¡æ¯
            let statusMsg = "";
            const pecletNumber = (u * L_si * 1000) / D_si; // Pe = uL/D
            
            if (pecletNumber > 10 && actualResidue > 50) {
                statusMsg = "âš ï¸ æç¤ºï¼šå¯¹æµä½œç”¨è¾ƒå¼º(Pe > 10)ï¼Œä½†å¯¹æ·±å­”æ®‹ç•™æ¸…é™¤æ•ˆæœæœ‰é™ã€‚å»ºè®®å‡å°å­”é“æ·±åº¦æˆ–å¢åŠ æ¸…æ´—æ—¶é—´ã€‚";
            } else if (L > 200 && actualResidue > 60) {
                statusMsg = "âš ï¸ æç¤ºï¼šå­”é“æ·±åº¦è¿‡å¤§ï¼Œæ‰©æ•£è·ç¦»å¤ªé•¿ã€‚å‡å°å­”é“æ·±åº¦æˆ–ä¼˜åŒ–å­”é“è®¾è®¡å¯æ˜¾è‘—æé«˜æ¸…æ´—æ•ˆç‡ã€‚";
            } else if (t < diffusionTime && actualResidue > 70) {
                statusMsg = "âš ï¸ æç¤ºï¼šæ¸…æ´—æ—¶é—´ä¸è¶³ï¼Œæ‰©æ•£è¿‡ç¨‹ä¸å……åˆ†ã€‚å¢åŠ æ¸…æ´—æ—¶é—´æˆ–è€ƒè™‘æé«˜æ‰©æ•£ç³»æ•°ã€‚";
            } else if (actualResidue < 5) {
                statusMsg = "âœ… ä¼˜ç§€ï¼å½“å‰å‚æ•°è®¾ç½®å®ç°äº†é«˜æ•ˆçš„å­”é“æ¸…æ´—æ•ˆæœã€‚æ®‹ç•™æ¸…é™¤ç‡è¾¾åˆ°95%ä»¥ä¸Šã€‚";
            } else if (actualResidue < 20) {
                statusMsg = "âœ… è‰¯å¥½ï¼æ¸…æ´—æ•ˆæœè¾¾åˆ°å·¥ç¨‹è¦æ±‚ã€‚å¯ä»¥è€ƒè™‘è¿›ä¸€æ­¥ä¼˜åŒ–å‚æ•°ä»¥é™ä½èƒ½è€—æˆ–ç¼©çŸ­æ—¶é—´ã€‚";
            } else if (actualResidue < 50) {
                statusMsg = "ğŸ“Š ä¸­ç­‰æ¸…æ´—æ•ˆæœã€‚å»ºè®®è°ƒæ•´å‚æ•°è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚æ‰©æ•£ç³»æ•°Då’Œå­”é“æ·±åº¦Læ˜¯å…³é”®å‚æ•°ã€‚";
            } else {
                statusMsg = "è°ƒæ•´å‚æ•°ä»¥ä¼˜åŒ–å­”é“æ¸…æ´—æ•ˆæœã€‚è§‚å¯Ÿæµ“åº¦åˆ†å¸ƒå›¾äº†è§£å­”é“å†…ä¼ è´¨è¿‡ç¨‹ã€‚";
            }
            
            // æ·»åŠ æ‰©æ•£ç‰¹å¾æ—¶é—´ä¿¡æ¯
            statusMsg += `\nğŸ“ˆ ç‰¹å¾æ‰©æ•£æ—¶é—´ï¼š${diffusionTime.toFixed(1)}ç§’ï¼Œä½©å…‹è±æ•°Peï¼š${pecletNumber.toFixed(1)}`;
            
            document.getElementById('status-message').textContent = statusMsg;
        }

        // åˆ‡æ¢æ¸¸æˆéƒ¨åˆ†
        function switchSection(sectionId) {
            // éšè—æ‰€æœ‰éƒ¨åˆ†
            document.querySelectorAll('.game-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡éƒ¨åˆ†
            document.getElementById(`section-${sectionId}`).classList.add('active');
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            gameState.currentSection = sectionId;
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆå§‹åŒ–ç­”æ¡ˆé€‰æ‹©
        function initAnswerSelection() {
            document.querySelectorAll('.answer-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionBox = this.closest('.question-box');
                    const options = questionBox.querySelectorAll('.answer-option');
                    
                    // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰æ‹©çŠ¶æ€
                    options.forEach(opt => opt.classList.remove('selected'));
                    
                    // æ·»åŠ å½“å‰é€‰é¡¹çš„é€‰æ‹©çŠ¶æ€
                    this.classList.add('selected');
                    
                    // ä¿å­˜ç”¨æˆ·ç­”æ¡ˆ
                    const questionId = questionBox.id.replace('-box', '');
                    gameState.userAnswers[questionId] = this.getAttribute('data-value');
                });
            });
        }

        // æäº¤ç­”æ¡ˆå¹¶æ˜¾ç¤ºè§£æ
        function submitAnswers() {
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰é—®é¢˜éƒ½å·²å›ç­”
            if (!gameState.userAnswers.q1 || !gameState.userAnswers.q2) {
                alert("è¯·å…ˆå›ç­”æ‰€æœ‰é—®é¢˜ï¼");
                return;
            }
            
            // æ˜¾ç¤ºåé¦ˆ
            document.querySelectorAll('.answer-feedback').forEach(feedback => {
                feedback.classList.add('show');
            });
            
            // éšè—æäº¤æŒ‰é’®ï¼Œæ˜¾ç¤ºä¸‹ä¸€æ­¥æŒ‰é’®
            document.getElementById('btn-submit-answers').style.display = 'none';
            document.getElementById('btn-next-to-rating').style.display = 'flex';
            
            // æ ‡è®°ç­”æ¡ˆå·²æäº¤
            gameState.answersSubmitted = true;
            
            // æ ¹æ®ç­”æ¡ˆæ·»åŠ æ­£ç¡®/é”™è¯¯æ ·å¼
            const q1Correct = gameState.userAnswers.q1 === 'no';
            const q2Correct = gameState.userAnswers.q2 === 'combined' || gameState.userAnswers.q2 === 'decrease-l';
            
            document.getElementById('q1-feedback').classList.add(q1Correct ? 'correct' : 'incorrect');
            document.getElementById('q2-feedback').classList.add(q2Correct ? 'correct' : 'incorrect');
        }

        // è®¡ç®—å·¥ç¨‹å¸ˆè¯„çº§
        function calculateEngineerRating() {
            const params = gameState.parameters;
            const answers = gameState.userAnswers;
            
            // 1. æ‰©æ•£æ§åˆ¶ç†è§£å¾—åˆ† (0-100)
            let diffusionScore = 50;
            if (answers.q1 === 'no') diffusionScore += 40;
            else if (answers.q1 === 'depends') diffusionScore += 20;
            else diffusionScore += 5;
            
            // 2. å‚æ•°æ•æ„Ÿæ€§å¾—åˆ†
            let sensitivityScore = 50;
            const D_si = params.D * 1e-9;
            const L_si = params.L * 1e-6;
            const diffusionTime = (L_si * L_si) / D_si;
            const residual = Math.exp(-0.8 * params.t / diffusionTime) * 100;
            
            if (residual < 10) sensitivityScore += 40;
            else if (residual < 20) sensitivityScore += 30;
            else if (residual < 40) sensitivityScore += 20;
            else if (residual < 60) sensitivityScore += 10;
            else sensitivityScore += 5;
            
            // 3. å·¥ç¨‹åˆ¤æ–­åŠ›å¾—åˆ†
            let judgmentScore = 50;
            if (answers.q2 === 'combined') judgmentScore += 40;
            else if (answers.q2 === 'decrease-l') judgmentScore += 35;
            else if (answers.q2 === 'increase-t') judgmentScore += 20;
            else judgmentScore += 5;
            
            // 4. å·¥è‰ºä¼˜åŒ–èƒ½åŠ›å¾—åˆ†
            let optimizationScore = 50;
            const isOptimalParams = params.L <= 150 && params.t >= 60 && params.D >= 0.5;
            if (isOptimalParams && residual < 20) optimizationScore += 40;
            else if (residual < 40) optimizationScore += 25;
            else optimizationScore += 10;
            
            // 5. å®è·µåº”ç”¨èƒ½åŠ›å¾—åˆ†
            let practicalScore = 50;
            const practicalParams = params.L <= 200 && params.t <= 300 && params.u <= 100;
            if (practicalParams && residual < 30) practicalScore += 40;
            else if (practicalParams) practicalScore += 25;
            else practicalScore += 10;
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€åˆ†æ•°
            gameState.scores.diffusionControl = Math.min(100, Math.round(diffusionScore));
            gameState.scores.parameterSensitivity = Math.min(100, Math.round(sensitivityScore));
            gameState.scores.engineeringJudgment = Math.min(100, Math.round(judgmentScore));
            gameState.scores.processOptimization = Math.min(100, Math.round(optimizationScore));
            gameState.scores.practicalApplication = Math.min(100, Math.round(practicalScore));
            
            // æ›´æ–°åˆ†æ•°æ˜¾ç¤º
            document.getElementById('score-diffusion').textContent = gameState.scores.diffusionControl;
            document.getElementById('score-sensitivity').textContent = gameState.scores.parameterSensitivity;
            document.getElementById('score-judgment').textContent = gameState.scores.engineeringJudgment;
            document.getElementById('score-optimization').textContent = gameState.scores.processOptimization;
            document.getElementById('score-practical').textContent = gameState.scores.practicalApplication;
            
            // ç¡®å®šå·¥ç¨‹å¸ˆç­‰çº§
            const totalScore = Object.values(gameState.scores).reduce((a, b) => a + b, 0);
            const averageScore = totalScore / 5;
            
            let engineerLevel = "è§ä¹ å·¥ç¨‹å¸ˆ";
            let certificateDesc = "æ­¤è®¤è¯è¯æ˜æŒæœ‰äººå·²æŒæ¡å­”é“æ¸…æ´—ä¼ è´¨æ§åˆ¶çš„åŸºæœ¬åŸç†ï¼Œéœ€è¦åœ¨æŒ‡å¯¼ä¸‹å®Œæˆæ¸…æ´—å·¥è‰ºè®¾è®¡ä»»åŠ¡ã€‚";
            
            if (averageScore >= 90) {
                engineerLevel = "é«˜çº§å·¥ç¨‹å¸ˆ";
                certificateDesc = "æ­¤è®¤è¯è¯æ˜æŒæœ‰äººåœ¨å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹æ–¹é¢å…·å¤‡å“è¶Šèƒ½åŠ›ï¼Œèƒ½å¤Ÿç‹¬ç«‹è®¾è®¡ä¼˜åŒ–å¤æ‚æ¸…æ´—å·¥è‰ºç³»ç»Ÿã€‚";
            } else if (averageScore >= 80) {
                engineerLevel = "å·¥ç¨‹å¸ˆ";
                certificateDesc = "æ­¤è®¤è¯è¯æ˜æŒæœ‰äººåœ¨å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹æ–¹é¢å…·å¤‡è‰¯å¥½èƒ½åŠ›ï¼Œèƒ½å¤Ÿç‹¬ç«‹å®Œæˆå¸¸è§„æ¸…æ´—å·¥è‰ºè®¾è®¡ä»»åŠ¡ã€‚";
            } else if (averageScore >= 70) {
                engineerLevel = "åŠ©ç†å·¥ç¨‹å¸ˆ";
                certificateDesc = "æ­¤è®¤è¯è¯æ˜æŒæœ‰äººåœ¨å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹æ–¹é¢å…·å¤‡åŸºç¡€èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¤„ç†åŸºæœ¬æ¸…æ´—å·¥è‰ºè®¾è®¡ä»»åŠ¡ã€‚";
            } else if (averageScore >= 60) {
                engineerLevel = "è§ä¹ å·¥ç¨‹å¸ˆ";
                certificateDesc = "æ­¤è®¤è¯è¯æ˜æŒæœ‰äººå·²æŒæ¡å­”é“æ¸…æ´—ä¼ è´¨æ§åˆ¶çš„åŸºæœ¬åŸç†ï¼Œéœ€è¦åœ¨æŒ‡å¯¼ä¸‹å®Œæˆæ¸…æ´—å·¥è‰ºè®¾è®¡ä»»åŠ¡ã€‚";
            } else {
                engineerLevel = "å…¥é—¨å­¦å‘˜";
                certificateDesc = "æ­¤è®¤è¯è¯æ˜æŒæœ‰äººå·²åˆæ­¥äº†è§£å­”é“æ¸…æ´—ä¼ è´¨çš„åŸºæœ¬åŸç†ï¼Œéœ€è¦è¿›ä¸€æ­¥åŠ å¼ºå­¦ä¹ å’Œå®è·µã€‚";
            }
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('engineer-level').textContent = engineerLevel;
            document.getElementById('certificate-desc').textContent = certificateDesc;
            
            // ç”Ÿæˆé›·è¾¾å›¾
            generateRadarChart();
        }

        // ç”Ÿæˆé›·è¾¾å›¾
        function generateRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            // é”€æ¯ç°æœ‰å›¾è¡¨
            if (window.radarChartInstance) {
                window.radarChartInstance.destroy();
            }
            
            window.radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: [
                        'æ‰©æ•£æ§åˆ¶ç†è§£',
                        'å‚æ•°æ•æ„Ÿæ€§', 
                        'å·¥ç¨‹åˆ¤æ–­åŠ›',
                        'å·¥è‰ºä¼˜åŒ–èƒ½åŠ›',
                        'å®è·µåº”ç”¨èƒ½åŠ›'
                    ],
                    datasets: [{
                        label: 'ä¼ è´¨å·¥ç¨‹èƒ½åŠ›è¯„ä¼°',
                        data: [
                            gameState.scores.diffusionControl,
                            gameState.scores.parameterSensitivity,
                            gameState.scores.engineeringJudgment,
                            gameState.scores.processOptimization,
                            gameState.scores.practicalApplication
                        ],
                        backgroundColor: 'rgba(0, 212, 255, 0.2)',
                        borderColor: 'rgba(0, 212, 255, 1)',
                        pointBackgroundColor: 'rgba(0, 212, 255, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(0, 212, 255, 1)',
                        borderWidth: 2,
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { 
                                color: 'rgba(255, 255, 255, 0.15)' 
                            },
                            grid: { 
                                color: 'rgba(255, 255, 255, 0.1)' 
                            },
                            pointLabels: { 
                                color: 'rgba(255, 255, 255, 0.9)',
                                font: { 
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                color: 'rgba(255, 255, 255, 0.6)',
                                font: { size: 10 },
                                suggestedMin: 0,
                                suggestedMax: 100,
                                stepSize: 20
                            },
                            min: 0,
                            max: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'rgba(255, 255, 255, 0.9)',
                                font: { 
                                    size: 12 
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(10, 25, 47, 0.95)',
                            titleColor: '#00d4ff',
                            bodyColor: '#e0e0ff',
                            borderColor: '#00d4ff',
                            borderWidth: 1,
                            cornerRadius: 8
                        }
                    }
                }
            });
        }

        // äº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', function() {
            // å‚æ•°æ»‘å—äº‹ä»¶
            document.querySelectorAll('input[type="range"]').forEach(slider => {
                slider.addEventListener('input', updateParameters);
            });

            // æµ‹è¯•æŒ‰é’®
            document.getElementById('btn-test').addEventListener('click', function() {
                switchSection('challenge');
            });

            // é‡ç½®æŒ‰é’®
            document.getElementById('btn-reset').addEventListener('click', function() {
                document.getElementById('param-D').value = 1;
                document.getElementById('param-L').value = 100;
                document.getElementById('param-T').value = 60;
                document.getElementById('param-U').value = 10;
                updateParameters();
            });

            // åˆå§‹åŒ–ç­”æ¡ˆé€‰æ‹©
            initAnswerSelection();

            // æäº¤ç­”æ¡ˆæŒ‰é’®
            document.getElementById('btn-submit-answers').addEventListener('click', submitAnswers);

            // ä¸‹ä¸€æ­¥åˆ°è¯„çº§æŒ‰é’®
            document.getElementById('btn-next-to-rating').addEventListener('click', function() {
                calculateEngineerRating();
                switchSection('rating');
            });

            // è¿”å›å‚æ•°è°ƒæ•´æŒ‰é’®
            document.getElementById('btn-back-to-params').addEventListener('click', function() {
                switchSection('parameters');
            });

            // é‡æ–°å¼€å§‹æŒ‰é’®
            document.getElementById('btn-restart').addEventListener('click', function() {
                // é‡ç½®æ¸¸æˆçŠ¶æ€
                gameState.userAnswers = { q1: null, q2: null };
                gameState.answersSubmitted = false;
                gameState.scores = {
                    diffusionControl: 0,
                    parameterSensitivity: 0,
                    engineeringJudgment: 0,
                    processOptimization: 0,
                    practicalApplication: 0
                };
                
                // é‡ç½®å‚æ•°
                document.getElementById('param-D').value = 1;
                document.getElementById('param-L').value = 100;
                document.getElementById('param-T').value = 60;
                document.getElementById('param-U').value = 10;
                
                // é‡ç½®ç­”æ¡ˆé€‰æ‹©
                document.querySelectorAll('.answer-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // éšè—åé¦ˆ
                document.querySelectorAll('.answer-feedback').forEach(feedback => {
                    feedback.classList.remove('show');
                    feedback.classList.remove('correct', 'incorrect');
                });
                
                // é‡ç½®æŒ‰é’®æ˜¾ç¤º
                document.getElementById('btn-submit-answers').style.display = 'flex';
                document.getElementById('btn-next-to-rating').style.display = 'none';
                
                // è¿”å›ç¬¬ä¸€å…³
                switchSection('parameters');
                updateParameters();
            });

            // è¿”å›æŒ‘æˆ˜æŒ‰é’®
            document.getElementById('btn-back-to-challenge').addEventListener('click', function() {
                switchSection('challenge');
            });

            // åˆå§‹æ›´æ–°
            updateParameters();
        });

        // å“åº”å¼è°ƒæ•´Canvaså¤§å°
        window.addEventListener('resize', function() {
            updateParameters();
        });
    </script>

 
 
<!-- åº•éƒ¨ä¿¡æ¯æ  -->
<div style="
    text-align: center;
    padding: 20px 30px;
    margin-top: 40px;
    color: #e6f7ff;
    font-size: 0.9rem;
    border-top: 2px solid rgba(0, 180, 255, 0.5);
    background: linear-gradient(135deg, rgba(10, 15, 43, 0.95), rgba(18, 26, 58, 0.9));
    border-radius: 15px 15px 0 0;
    box-shadow: 0 -10px 30px rgba(0, 180, 255, 0.1);
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
    width: 100%;
    max-width: none;
">
    <div style="position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, #00b4ff, #6c8cff, #00b4ff);"></div>
    
    <p style="font-size: 1.3rem; font-weight: bold; margin-bottom: 15px; color: #00b4ff;">
        å­”é“æ¸…æ´—ä¼ è´¨å·¥ç¨‹æ¨¡æ‹Ÿå™¨ &copy; 2025 | å·¥ç¨‹æ€ç»´è®­ç»ƒç³»ç»Ÿ | ç‰ˆæœ¬ 1.0  |
      <style="margin-bottom: 12px; color: #cbd5e1;">
        <strong>é‚®ç®±:</strong> xgyanger@qq.com
    </p>
    
    <div style="margin-top: 15px;">
        <span style="color: #ffcc00; font-weight: bold; font-size: 1.1rem;">
            ç‰ˆæƒÂ©2025 AIknow. ä¿ç•™æ‰€æœ‰æƒåˆ© | Copyright Â©2025 AIknow. All rights reserved.
        </span>
    </div>
</div>


</body>
</html>