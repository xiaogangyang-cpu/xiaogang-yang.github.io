<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>牛顿冷却定律综合评测系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%);
            color: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #f093fb, #f5576c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a4b0be;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .page {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .page.active {
            display: block;
            opacity: 1;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .controls-panel, .simulation-panel, .test-panel {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .controls-panel {
            flex: 1;
            min-width: 300px;
        }
        
        .simulation-panel {
            flex: 2;
            min-width: 500px;
        }
        
        .test-panel {
            width: 100%;
        }
        
        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #f8c291;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title i {
            font-size: 1.3rem;
        }
        
        .control-group {
            margin-bottom: 25px;
        }
        
        .control-label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #dfe6e9;
        }
        
        .cooling-method-selector {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .method-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .method-option:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }
        
        .method-option.active {
            background: rgba(45, 156, 219, 0.25);
            border-color: #2d9cdb;
            box-shadow: 0 5px 15px rgba(45, 156, 219, 0.3);
        }
        
        .method-icon {
            font-size: 2rem;
            width: 50px;
            text-align: center;
            color: #f8c291;
        }
        
        .method-info {
            flex: 1;
        }
        
        .method-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .method-desc {
            font-size: 0.9rem;
            color: #a4b0be;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .slider-value {
            min-width: 60px;
            text-align: center;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            color: #f8c291;
        }
        
        input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #f8c291;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }
        
        .temperature-display {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .temp-label {
            font-size: 0.9rem;
            color: #a4b0be;
        }
        
        .temp-value {
            font-weight: 600;
            color: #f8c291;
        }
        
        .material-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .material-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .material-option:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .material-option.active {
            background: rgba(45, 156, 219, 0.25);
            border-color: #2d9cdb;
        }
        
        .simulation-area {
            height: 400px;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            margin-bottom: 20px;
        }
        
        .heat-source {
            position: absolute;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, #ff6b6b, #ee5a24);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.7);
            z-index: 10;
        }
        
        .heat-source-large {
            width: 200px;
            height: 200px;
        }
        
        .heat-source-small {
            width: 100px;
            height: 100px;
        }
        
        .temperature-map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: background 1.5s ease;
        }
        
        .air-flow, .liquid-flow, .forced-flow {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .flow-particle {
            position: absolute;
            background: rgba(116, 185, 255, 0.6);
            border-radius: 50%;
            animation: flow 15s linear infinite;
        }
        
        .flow-particle.liquid {
            background: rgba(52, 152, 219, 0.8);
        }
        
        .flow-arrow {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            clip-path: polygon(0 0, 100% 50%, 0 100%);
            animation: flow-arrow 8s linear infinite;
        }
        
        .streamline {
            position: absolute;
            height: 2px;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.3), transparent);
            border-radius: 1px;
            animation: streamline-flow 12s linear infinite;
        }
        
        .fan-indicator {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            z-index: 5;
            animation: fan-rotate 2s linear infinite;
        }
        
        .flow-direction {
            position: absolute;
            width: 100%;
            height: 30px;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), transparent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            z-index: 1;
        }
        
        @keyframes flow {
            0% {
                transform: translateX(-20px) translateY(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateX(calc(100% + 20px)) translateY(0);
                opacity: 0;
            }
        }
        
        @keyframes flow-arrow {
            0% {
                transform: translateX(-30px) translateY(0);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateX(calc(100% + 30px)) translateY(0);
                opacity: 0;
            }
        }
        
        @keyframes streamline-flow {
            0% {
                background-position: -100% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }
        
        @keyframes fan-rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .comparison-table th {
            color: #f8c291;
            font-weight: 600;
        }
        
        .comparison-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .formula-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .formula-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #f8c291;
        }
        
        .formula {
            font-size: 1.5rem;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-family: 'Cambria Math', serif;
        }
        
        .formula-explanation {
            line-height: 1.6;
            color: #dfe6e9;
        }
        
        /* 测试部分样式 */
        .test-question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #f8c291;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
        }
        
        .option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .option.selected {
            background: rgba(45, 156, 219, 0.25);
            border-color: #2d9cdb;
        }
        
        .option.correct {
            background: rgba(46, 204, 113, 0.25);
            border-color: #2ecc71;
        }
        
        .option.incorrect {
            background: rgba(231, 76, 60, 0.25);
            border-color: #e74c3c;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn {
            padding: 12px 30px;
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn-next {
            background: linear-gradient(to right, #2ecc71, #27ae60);
        }
        
        .btn-next:hover {
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }
        
        .btn-back {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
        }
        
        .btn-back:hover {
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.4);
        }
        
        .btn-submit {
            background: linear-gradient(to right, #e67e22, #d35400);
        }
        
        .btn-submit:hover {
            box-shadow: 0 5px 15px rgba(230, 126, 34, 0.4);
        }
        
        .btn-reset {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }
        
        .btn-reset:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
        
        .result-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            text-align: center;
            display: none;
        }
        
        .result-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #f8c291;
        }
        
        .engineer-level {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(135deg, #0c2461, #1e3799);
        }
        
        .level-beginner {
            color: #f39c12;
            border: 3px solid #f39c12;
        }
        
        .level-engineer {
            color: #3498db;
            border: 3px solid #3498db;
        }
        
        .level-expert {
            color: #2ecc71;
            border: 3px solid #2ecc71;
        }
        
        .result-description {
            font-size: 1.1rem;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 20px;
        }
        
        .score-display {
            font-size: 1.3rem;
            margin: 15px 0;
            color: #f8c291;
        }
        
        .page-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .page-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .page-dot.active {
            background: #f8c291;
            transform: scale(1.2);
        }
        
        .exploration-tips {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-top: 20px;
        }
        
        .exploration-tips h4 {
            color: #f8c291;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cooling-effect {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            font-size: 1.1rem;
            color: #f8c291;
        }
        
        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .parameter-table th, .parameter-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .parameter-table th {
            color: #f8c291;
            font-weight: 600;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #a4b0be;
            font-size: 0.9rem;
        }
        
        .medium-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .medium-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .medium-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .medium-btn.active {
            background: rgba(45, 156, 219, 0.25);
            color: #f8c291;
            font-weight: 600;
        }
        
        @media (max-width: 1100px) {
            .content {
                flex-direction: column;
            }
            
            .controls-panel, .simulation-panel {
                min-width: 100%;
            }
        }
        
        .performance-indicator {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .indicator {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 150px;
        }
        
        .indicator-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #f8c291;
            margin: 10px 0;
        }
        
        .indicator-label {
            font-size: 0.9rem;
            color: #a4b0be;
        }
        
        .flow-visualization {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .flow-vis-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .flow-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .flow-text {
            font-size: 0.9rem;
        }
        
        .area-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .area-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .area-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .area-btn.active {
            background: rgba(45, 156, 219, 0.25);
            color: #f8c291;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-temperature-high"></i> 牛顿冷却定律综合模拟器</h1>
            <p class="subtitle">探索牛顿冷却定律Q = h × A × ΔT中各个参数对散热效果的影响，完成综合工程师评级测试。</p>
        </header>
        
        <div class="page-indicator">
            <div class="page-dot active" data-page="1"></div>
            <div class="page-dot" data-page="2"></div>
        </div>
        
        <!-- 页面1：模拟探索 -->
        <div class="page active" id="page1">
            <div class="content">
                <div class="controls-panel">
                    <h2 class="panel-title"><i class="fas fa-sliders-h"></i> 牛顿冷却定律参数控制</h2>
                    
                    <div class="control-group">
                        <label class="control-label">选择散热方式 (影响传热系数h):</label>
                        <div class="cooling-method-selector" id="coolingMethodSelector">
                            <div class="method-option active" data-method="air">
                                <div class="method-icon"><i class="fas fa-wind"></i></div>
                                <div class="method-info">
                                    <div class="method-name">风冷（自然对流）</div>
                                    <div class="method-desc">h ≈ 5-25 W/m²·K</div>
                                </div>
                            </div>
                            <div class="method-option" data-method="liquid">
                                <div class="method-icon"><i class="fas fa-tint"></i></div>
                                <div class="method-info">
                                    <div class="method-name">液冷</div>
                                    <div class="method-desc">h ≈ 100-1000 W/m²·K</div>
                                </div>
                            </div>
                            <div class="method-option" data-method="forced">
                                <div class="method-icon"><i class="fas fa-fan"></i></div>
                                <div class="method-info">
                                    <div class="method-name">强制对流</div>
                                    <div class="method-desc">h ≈ 25-250 W/m²·K</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">热源温度 (影响温差ΔT): <span id="heatTempValue" class="slider-value">80°C</span></label>
                        <div class="slider-container">
                            <input type="range" id="heatTempSlider" min="50" max="150" value="80" step="5">
                        </div>
                        <div class="temperature-display">
                            <span class="temp-label">低温</span>
                            <span class="temp-label">高温</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">环境温度 (影响温差ΔT): <span id="ambientTempValue" class="slider-value">25°C</span></label>
                        <div class="slider-container">
                            <input type="range" id="ambientTempSlider" min="0" max="40" value="25" step="1">
                        </div>
                        <div class="temperature-display">
                            <span class="temp-label">低温</span>
                            <span class="temp-label">高温</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">流速/风速 (影响传热系数h): <span id="flowRateValue" class="slider-value">1.0 m/s</span></label>
                        <div class="slider-container">
                            <input type="range" id="flowRateSlider" min="0.1" max="5.0" value="1.0" step="0.1">
                        </div>
                        <div class="temperature-display">
                            <span class="temp-label">低速</span>
                            <span class="temp-label">高速</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">热源面积 (影响散热面积A):</label>
                        <div class="area-selector">
                            <button class="area-btn active" data-area="small">小面积</button>
                            <button class="area-btn" data-area="medium">中面积</button>
                            <button class="area-btn" data-area="large">大面积</button>
                        </div>
                    </div>
                    
                    <div class="control-group" id="mediumControl">
                        <label class="control-label">冷却介质 (影响传热系数h):</label>
                        <div class="medium-selector">
                            <button class="medium-btn active" data-medium="air">空气</button>
                            <button class="medium-btn" data-medium="water">水</button>
                            <button class="medium-btn" data-medium="oil">硅油</button>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">基板材料 (影响内部热传导):</label>
                        <div class="material-selector">
                            <div class="material-option active" data-material="aluminum">铝</div>
                            <div class="material-option" data-material="copper">铜</div>
                            <div class="material-option" data-material="steel">钢</div>
                            <div class="material-option" data-material="ceramic">陶瓷</div>
                        </div>
                    </div>
                    
                    <div class="flow-visualization">
                        <div class="flow-vis-item">
                            <div class="flow-color" style="background: rgba(116, 185, 255, 0.6);"></div>
                            <div class="flow-text">风冷流动</div>
                        </div>
                        <div class="flow-vis-item">
                            <div class="flow-color" style="background: rgba(52, 152, 219, 0.8);"></div>
                            <div class="flow-text">液冷流动</div>
                        </div>
                        <div class="flow-vis-item">
                            <div class="flow-color" style="background: rgba(255, 255, 255, 0.2); clip-path: polygon(0 0, 100% 50%, 0 100%);"></div>
                            <div class="flow-text">强制对流箭头</div>
                        </div>
                    </div>
                    
                    <div class="exploration-tips">
                        <h4><i class="fas fa-lightbulb"></i> 牛顿冷却定律探索提示</h4>
                        <p>1. 传热系数h：通过选择散热方式、调节流速、切换介质来改变</p>
                        <p>2. 散热面积A：通过选择热源面积来改变</p>
                        <p>3. 温差ΔT：通过调节热源温度和环境温度来改变</p>
                        <p>4. 观察Q = h × A × ΔT公式中每个参数对散热功率Q的影响</p>
                    </div>
                </div>
                
                <div class="simulation-panel">
                    <h2 class="panel-title"><i class="fas fa-temperature-high"></i> 牛顿冷却定律模拟 Q = h × A × ΔT</h2>
                    
                    <div class="simulation-area">
                        <div class="heat-source" id="heatSource">80°C</div>
                        <div class="temperature-map" id="temperatureMap"></div>
                        <div class="air-flow" id="airFlow"></div>
                        <div class="liquid-flow" id="liquidFlow"></div>
                        <div class="forced-flow" id="forcedFlow"></div>
                        
                        <!-- 风扇指示器（强制对流时显示） -->
                        <div class="fan-indicator" id="fanIndicator" style="display: none;">
                            <i class="fas fa-fan"></i>
                        </div>
                        
                        <!-- 流动方向指示 -->
                        <div class="flow-direction" id="flowDirection" style="display: none;">
                            气流方向 →
                        </div>
                    </div>
                    
                    <div class="cooling-effect">
                        <span id="coolingEffectText">当前散热效果：中等</span>
                    </div>
                    
                    <div class="performance-indicator">
                        <div class="indicator">
                            <div class="indicator-label">散热功率 Q</div>
                            <div class="indicator-value" id="coolingPower">125 W</div>
                            <div class="indicator-label">Q = h × A × ΔT</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-label">传热系数 h</div>
                            <div class="indicator-value" id="hValue">25.0</div>
                            <div class="indicator-label">W/m²·K</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-label">散热面积 A</div>
                            <div class="indicator-value" id="areaValue">0.1</div>
                            <div class="indicator-label">m²</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-label">温差 ΔT</div>
                            <div class="indicator-value" id="deltaTValue">55</div>
                            <div class="indicator-label">K</div>
                        </div>
                    </div>
                    
                    <div class="formula-panel">
                        <h3 class="formula-title"><i class="fas fa-calculator"></i> 牛顿冷却定律公式</h3>
                        <div class="formula" id="formula">
                            Q = h × A × ΔT
                        </div>
                        <p class="formula-explanation" id="formulaExplanation">
                            <strong>牛顿冷却定律：</strong>散热功率Q与传热系数h、散热面积A和温差ΔT成正比。<br>
                            <strong>传热系数h：</strong>由散热方式、流速、介质决定，反映散热效率。<br>
                            <strong>散热面积A：</strong>热源与冷却介质接触的面积，面积越大散热越快。<br>
                            <strong>温差ΔT：</strong>热源温度与环境温度的差值，是热量传递的驱动力。
                        </p>
                        
                        <h3 class="formula-title" style="margin-top: 25px;"><i class="fas fa-chart-line"></i> 各参数对散热功率的影响程度</h3>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>参数</th>
                                    <th>物理意义</th>
                                    <th>典型变化范围</th>
                                    <th>对Q的影响</th>
                                    <th>工程调控方法</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>传热系数 h</td>
                                    <td>散热效率指标</td>
                                    <td>5-1000 W/m²·K</td>
                                    <td>最显著（可差200倍）</td>
                                    <td>改变散热方式、提高流速、优化介质</td>
                                </tr>
                                <tr>
                                    <td>散热面积 A</td>
                                    <td>热交换面积</td>
                                    <td>0.01-1 m²</td>
                                    <td>线性影响</td>
                                    <td>增加散热片、扩展表面积</td>
                                </tr>
                                <tr>
                                    <td>温差 ΔT</td>
                                    <td>热传递驱动力</td>
                                    <td>10-100 K</td>
                                    <td>线性影响</td>
                                    <td>提高热源功率或降低环境温度</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <div></div> <!-- 占位 -->
                <button class="btn btn-next" id="nextButton">
                    <i class="fas fa-arrow-right"></i> 完成探索，开始评测
                </button>
            </div>
        </div>
        
        <!-- 页面2：牛顿冷却定律综合评测 -->
        <div class="page" id="page2">
            <div class="test-panel">
                <h2 class="panel-title"><i class="fas fa-graduation-cap"></i> 牛顿冷却定律综合评测</h2>
                <p style="margin-bottom: 25px; line-height: 1.6;">你已经完成了牛顿冷却定律Q = h × A × ΔT的参数探索。现在回答以下5道选择题来全面测试你对牛顿冷却定律的理解。根据你的表现，将获得工程师评级：初级工程师、工程师或专业工程师。</p>
                
                <div class="test-question" id="question1">
                    <div class="question-text">1. 根据牛顿冷却定律 Q = h × A × ΔT，如果要使散热功率Q增加为原来的2倍，以下哪种方法最有效？</div>
                    <div class="options">
                        <div class="option" data-value="A">A. 将温差ΔT增加为原来的2倍</div>
                        <div class="option" data-value="B">B. 将散热面积A增加为原来的2倍</div>
                        <div class="option" data-value="C">C. 将传热系数h增加为原来的2倍</div>
                        <div class="option" data-value="D">D. 以上方法效果相同</div>
                    </div>
                </div>
                
                <div class="test-question" id="question2">
                    <div class="question-text">2. 在相同条件下，将散热方式从自然对流（h≈10）改为强制对流（h≈50），散热功率Q会如何变化？</div>
                    <div class="options">
                        <div class="option" data-value="A">A. 减少到原来的1/5</div>
                        <div class="option" data-value="B">B. 增加到原来的5倍</div>
                        <div class="option" data-value="C">C. 基本不变</div>
                        <div class="option" data-value="D">D. 增加到原来的2倍</div>
                    </div>
                </div>
                
                <div class="test-question" id="question3">
                    <div class="question-text">3. 将热源面积从"小面积"改为"大面积"，但保持其他参数不变，会发生什么？</div>
                    <div class="options">
                        <div class="option" data-value="A">A. 散热功率Q线性增加，热源表面温度降低</div>
                        <div class="option" data-value="B">B. 散热功率Q线性减少，热源表面温度升高</div>
                        <div class="option" data-value="C">C. 散热功率Q不变，热源表面温度不变</div>
                        <div class="option" data-value="D">D. 散热功率Q指数增加，热源表面温度不变</div>
                    </div>
                </div>
                
                <div class="test-question" id="question4">
                    <div class="question-text">4. 关于传热系数h，以下哪个说法是正确的？</div>
                    <div class="options">
                        <div class="option" data-value="A">A. h只与材料有关，与流速无关</div>
                        <div class="option" data-value="B">B. h反映了单位面积、单位温差下的散热功率</div>
                        <div class="option" data-value="C">C. h的单位是W/m·K</div>
                        <div class="option" data-value="D">D. 自然对流的h值总是大于强制对流</div>
                    </div>
                </div>
                
                <div class="test-question" id="question5">
                    <div class="question-text">5. 对于一个高温电子设备（100°C），如果要最大限度提高散热功率，应优先采取哪种措施？</div>
                    <div class="options">
                        <div class="option" data-value="A">A. 将环境温度从25°C降到20°C（ΔT从75K增加到80K）</div>
                        <div class="option" data-value="B">B. 将散热面积增加20%</div>
                        <div class="option" data-value="C">C. 从自然对流改为液冷（h从15增加到200）</div>
                        <div class="option" data-value="D">D. 将风速从1m/s提高到1.5m/s</div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                    <button class="btn btn-submit" id="submitTest">提交评测</button>
                    <button class="btn btn-reset" id="resetTest">重置答案</button>
                </div>
                
                <div class="result-panel" id="resultPanel">
                    <h3 class="result-title">评测结果</h3>
                    <div class="score-display">得分: <span id="scoreValue">0</span>/5</div>
                    <div class="engineer-level" id="engineerLevel">初级工程师</div>
                    <p class="result-description" id="resultDescription"></p>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 25px;">
                        <button class="btn btn-back" id="retryTest">重新评测</button>
                        <button class="btn" id="backToSimulation">返回模拟器</button>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-back" id="backButton">
                    <i class="fas fa-arrow-left"></i> 返回模拟器
                </button>
                <div></div> <!-- 占位 -->
            </div>
        </div>


<!-- 底部信息栏 -->
<div style="
    text-align: center;
    padding: 20px 30px;
    margin-top: 40px;
    color: #e6f7ff;
    font-size: 0.9rem;
    border-top: 2px solid rgba(0, 180, 255, 0.5);
    background: linear-gradient(135deg, rgba(10, 15, 43, 0.95), rgba(18, 26, 58, 0.9));
    border-radius: 15px 15px 0 0;
    box-shadow: 0 -10px 30px rgba(0, 180, 255, 0.1);
    position: relative;
    overflow: hidden;
    /* 新增以下，确保完全宽度 */
    box-sizing: border-box;
    width: 100%;
    max-width: none;
">    <div style="position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, #00b4ff, #6c8cff, #00b4ff);"></div>
        
    <p style="font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; color: #00b4ff;">

牛顿冷却定律综合模拟器© 2025 | 工程师传热评级测试系统 | 版本1.0  |  
    <style="margin-bottom: 12px; color: #cbd5e1;">
        <strong>邮箱:</strong> xgyanger@qq.com
    <div style="margin-top: 15px;">
        <span style="color: #ffcc00; font-weight: bold; font-size: 1rem;">
            版权©2025 AIknow. 保留所有权利 | Copyright ©2025 AIknow. All rights reserved.
        </span>
    </div>        
        </footer>
    </div>

    <script>
        // 散热方式数据
        const coolingMethods = {
            'air': {
                name: '风冷（自然对流）',
                hBase: 10,
                hFlowFactor: 0.1,
                flowEffect: 'weak',
                colorGradient: ['#ff6b6b', '#ff8e8e', '#ffb5b5', '#a5d6ff', '#74b9ff']
            },
            'liquid': {
                name: '液冷',
                hBase: 100,
                hFlowFactor: 0.6,
                flowEffect: 'strong',
                colorGradient: ['#ff6b6b', '#ff8e8e', '#ffb5b5', '#74b9ff', '#0984e3']
            },
            'forced': {
                name: '强制对流',
                hBase: 25,
                hFlowFactor: 0.8,
                flowEffect: 'medium',
                colorGradient: ['#ff6b6b', '#ff8e8e', '#a5d6ff', '#74b9ff', '#0984e3']
            }
        };
        
        // 冷却介质数据
        const coolingMedia = {
            'air': { name: '空气', density: 1.2, specificHeat: 1005, k: 0.026 },
            'water': { name: '水', density: 1000, specificHeat: 4182, k: 0.6 },
            'oil': { name: '硅油', density: 920, specificHeat: 1670, k: 0.1 }
        };
        
        // 材料数据
        const materials = {
            'aluminum': { name: '铝', k: 237, color: '#bdc3c7' },
            'copper': { name: '铜', k: 401, color: '#e58e26' },
            'steel': { name: '钢', k: 50, color: '#95a5a6' },
            'ceramic': { name: '陶瓷', k: 1.5, color: '#9b59b6' }
        };
        
        // 面积数据
        const areaSizes = {
            'small': { name: '小面积', size: 0.05, heatSourceClass: 'heat-source-small' },
            'medium': { name: '中面积', size: 0.1, heatSourceClass: '' },
            'large': { name: '大面积', size: 0.2, heatSourceClass: 'heat-source-large' }
        };
        
        // 当前选择的参数
        let currentMethod = 'air';
        let currentMedium = 'air';
        let currentMaterial = 'aluminum';
        let currentArea = 'medium';
        
        // 测试答案
        const correctAnswers = {
            'question1': 'D', // 理论上都使Q变为2倍，但工程上改变h最难也最有效
            'question2': 'B', // h从10到50，增加5倍
            'question3': 'A', // Q线性增加，表面温度降低
            'question4': 'B', // h反映了单位面积、单位温差下的散热功率
            'question5': 'C'  // 从自然对流改为液冷，h增加最多，效果最显著
        };
        
        // 测试结果描述
        const levelDescriptions = {
            'beginner': {
                title: '初级工程师',
                description: '你对牛顿冷却定律有基本了解，但还需要进一步掌握各参数的关系。建议多使用模拟器探索h、A、ΔT三个参数对散热功率Q的影响，理解每个参数的物理意义和工程调控方法。'
            },
            'engineer': {
                title: '工程师',
                description: '你对牛顿冷却定律有较好的理解，能够分析各参数对散热功率的影响。可以进一步学习复杂散热系统设计、热阻网络分析和瞬态热传导等高级主题。'
            },
            'expert': {
                title: '专业工程师',
                description: '恭喜！你对牛顿冷却定律有深入理解，能够准确分析各参数对散热功率的影响，并能在工程实践中合理选择调控策略。你已具备解决实际复杂热管理问题的能力！'
            }
        };
        
        // 页面管理
        let currentPage = 1;
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化散热方式选择器
            initCoolingMethodSelector();
            
            // 初始化面积选择器
            initAreaSelector();
            
            // 初始化冷却介质选择器
            initMediumSelector();
            
            // 初始化材料选择器
            initMaterialSelector();
            
            // 初始化滑块事件
            initSliders();
            
            // 初始化散热模拟
            updateSimulation();
            
            // 初始化测试系统
            initTestSystem();
            
            // 初始化页面切换
            initPageNavigation();
            
            // 创建流动粒子效果
            createFlowEffects();
        });
        
        // 初始化散热方式选择器
        function initCoolingMethodSelector() {
            const methodSelector = document.getElementById('coolingMethodSelector');
            
            document.querySelectorAll('.method-option').forEach(option => {
                option.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.method-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    
                    // 设置当前选中方式
                    this.classList.add('active');
                    currentMethod = this.getAttribute('data-method');
                    
                    // 更新模拟
                    updateSimulation();
                });
            });
        }
        
        // 初始化面积选择器
        function initAreaSelector() {
            document.querySelectorAll('.area-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.area-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // 设置当前选中面积
                    this.classList.add('active');
                    currentArea = this.getAttribute('data-area');
                    
                    // 更新模拟
                    updateSimulation();
                });
            });
        }
        
        // 初始化介质选择器
        function initMediumSelector() {
            document.querySelectorAll('.medium-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.medium-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // 设置当前选中介质
                    this.classList.add('active');
                    currentMedium = this.getAttribute('data-medium');
                    
                    // 更新模拟
                    updateSimulation();
                });
            });
        }
        
        // 更新介质按钮状态
        function updateMediumButtons() {
            document.querySelectorAll('.medium-btn').forEach(btn => {
                if (btn.getAttribute('data-medium') === currentMedium) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }
        
        // 初始化材料选择器
        function initMaterialSelector() {
            document.querySelectorAll('.material-option').forEach(option => {
                option.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.material-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    
                    // 设置当前选中材料
                    this.classList.add('active');
                    currentMaterial = this.getAttribute('data-material');
                    
                    // 更新模拟
                    updateSimulation();
                });
            });
        }
        
        // 初始化滑块事件
        function initSliders() {
            // 热源温度滑块
            const heatTempSlider = document.getElementById('heatTempSlider');
            const heatTempValue = document.getElementById('heatTempValue');
            
            heatTempSlider.addEventListener('input', function() {
                heatTempValue.textContent = this.value + '°C';
                updateSimulation();
            });
            
            // 环境温度滑块
            const ambientTempSlider = document.getElementById('ambientTempSlider');
            const ambientTempValue = document.getElementById('ambientTempValue');
            
            ambientTempSlider.addEventListener('input', function() {
                ambientTempValue.textContent = this.value + '°C';
                updateSimulation();
            });
            
            // 流速滑块
            const flowRateSlider = document.getElementById('flowRateSlider');
            const flowRateValue = document.getElementById('flowRateValue');
            
            flowRateSlider.addEventListener('input', function() {
                flowRateValue.textContent = this.value + ' m/s';
                updateSimulation();
            });
        }
        
        // 创建流动效果
        function createFlowEffects() {
            createRandomParticles('airFlow', 40, 'rgba(116, 185, 255, 0.6)', false);
            createRandomParticles('liquidFlow', 15, 'rgba(52, 152, 219, 0.8)', true);
            createForcedConvectionEffects();
        }
        
        // 创建随机粒子
        function createRandomParticles(containerId, count, color, isLiquid) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'flow-particle' + (isLiquid ? ' liquid' : '');
                particle.style.width = (isLiquid ? Math.random() * 10 + 8 : Math.random() * 6 + 3) + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (isLiquid ? Math.random() * 5 + 15 : Math.random() * 5 + 10) + 's';
                particle.style.backgroundColor = color;
                container.appendChild(particle);
            }
        }
        
        // 创建强制对流效果（流线+箭头）
        function createForcedConvectionEffects() {
            const container = document.getElementById('forcedFlow');
            container.innerHTML = '';
            
            // 创建5条流线
            const streamlinesY = [20, 35, 50, 65, 80]; // 百分比位置
            
            streamlinesY.forEach(y => {
                // 创建流线
                const streamline = document.createElement('div');
                streamline.className = 'streamline';
                streamline.style.top = y + '%';
                streamline.style.left = '0%';
                streamline.style.width = '100%';
                streamline.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(streamline);
                
                // 在每条流线上创建箭头
                for (let i = 0; i < 4; i++) {
                    const arrow = document.createElement('div');
                    arrow.className = 'flow-arrow';
                    arrow.style.top = y + '%';
                    arrow.style.left = (i * 25) + '%';
                    arrow.style.animationDelay = (i * 0.5) + 's';
                    container.appendChild(arrow);
                }
            });
            
            // 创建风扇指示器
            const fanIndicator = document.getElementById('fanIndicator');
            fanIndicator.style.left = '10%';
            fanIndicator.style.top = '50%';
            fanIndicator.style.transform = 'translateY(-50%)';
            
            // 创建流动方向指示
            const flowDirection = document.getElementById('flowDirection');
            flowDirection.style.top = '10%';
        }
        
        // 更新散热模拟
        function updateSimulation() {
            // 获取当前参数
            const heatTemp = parseInt(document.getElementById('heatTempSlider').value);
            const ambientTemp = parseInt(document.getElementById('ambientTempSlider').value);
            const flowRate = parseFloat(document.getElementById('flowRateSlider').value);
            
            // 计算温差
            const deltaT = heatTemp - ambientTemp;
            
            // 获取当前散热方式数据
            const method = coolingMethods[currentMethod];
            
            // 获取当前面积数据
            const areaData = areaSizes[currentArea];
            
            // 计算传热系数（考虑流速影响）
            let h = method.hBase;
            if (currentMethod !== 'air') {
                h = method.hBase * (1 + method.hFlowFactor * Math.pow(flowRate, 0.8));
            }
            
            // 考虑介质影响
            if (currentMethod === 'liquid') {
                const medium = coolingMedia[currentMedium];
                if (currentMedium === 'water') {
                    h *= 1.5;
                } else if (currentMedium === 'oil') {
                    h *= 0.8;
                }
            }
            
            // 计算散热功率 (Q = h * A * ΔT)
            const A = areaData.size;
            const Q = h * A * deltaT;
            
            // 计算表面温度
            const efficiency = Math.min(0.95, h / 500);
            const surfaceTemp = ambientTemp + (heatTemp - ambientTemp) * (1 - efficiency);
            
            // 更新热源显示
            const heatSource = document.getElementById('heatSource');
            heatSource.textContent = heatTemp + '°C';
            
            // 更新热源面积样式
            heatSource.className = 'heat-source ' + areaData.heatSourceClass;
            
            // 更新温度分布图
            updateTemperatureMap(heatTemp, ambientTemp, method, currentArea);
            
            // 更新流动效果显示
            updateFlowEffect(flowRate);
            
            // 更新性能指标
            document.getElementById('coolingPower').textContent = Math.round(Q) + ' W';
            document.getElementById('hValue').textContent = h.toFixed(1);
            document.getElementById('areaValue').textContent = A.toFixed(2);
            document.getElementById('deltaTValue').textContent = deltaT;
            
            // 更新散热效果文本
            let effectText = "当前散热效果：";
            const QperArea = Q / A; // 单位面积散热功率
            
            if (QperArea < 500) effectText += "较差";
            else if (QperArea < 1500) effectText += "中等";
            else if (QperArea < 3000) effectText += "良好";
            else effectText += "优秀";
            
            document.getElementById('coolingEffectText').textContent = effectText;
            
            // 更新公式显示
            updateFormulaDisplay(h, A, deltaT, Q, method, areaData);
        }
        
        // 更新温度分布图
        function updateTemperatureMap(heatTemp, ambientTemp, method, area) {
            const temperatureMap = document.getElementById('temperatureMap');
            
            const centerColor = method.colorGradient[0];
            const middleColor = method.colorGradient[Math.floor(method.colorGradient.length / 2)];
            const edgeColor = method.colorGradient[method.colorGradient.length - 1];
            
            // 根据面积调整温度扩散范围
            let gradientSize;
            if (area === 'small') {
                gradientSize = '70%'; // 小面积温度集中
            } else if (area === 'medium') {
                gradientSize = '60%';
            } else {
                gradientSize = '50%'; // 大面积温度分散
            }
            
            // 根据散热方式微调
            if (currentMethod === 'liquid') {
                gradientSize = (parseInt(gradientSize) - 10) + '%';
            } else if (currentMethod === 'forced') {
                gradientSize = (parseInt(gradientSize) - 5) + '%';
            }
            
            temperatureMap.style.background = `
                radial-gradient(circle at center, 
                    ${centerColor} 0%, 
                    ${middleColor} 30%, 
                    ${edgeColor} ${gradientSize}, 
                    rgba(255, 255, 255, 0.1) 100%)
            `;
        }
        
        // 更新流动效果显示
        function updateFlowEffect(flowRate) {
            const airFlow = document.getElementById('airFlow');
            const liquidFlow = document.getElementById('liquidFlow');
            const forcedFlow = document.getElementById('forcedFlow');
            const fanIndicator = document.getElementById('fanIndicator');
            const flowDirection = document.getElementById('flowDirection');
            
            // 根据当前散热方式显示/隐藏流动效果
            if (currentMethod === 'air') {
                airFlow.style.display = 'block';
                liquidFlow.style.display = 'none';
                forcedFlow.style.display = 'none';
                fanIndicator.style.display = 'none';
                flowDirection.style.display = 'none';
                
                // 调整空气流动速度
                const particles = airFlow.querySelectorAll('.flow-particle');
                particles.forEach(particle => {
                    particle.style.animationDuration = (10 / flowRate) + 's';
                });
            } 
            else if (currentMethod === 'liquid') {
                airFlow.style.display = 'none';
                liquidFlow.style.display = 'block';
                forcedFlow.style.display = 'none';
                fanIndicator.style.display = 'none';
                flowDirection.style.display = 'none';
                
                // 调整液体流动速度
                const particles = liquidFlow.querySelectorAll('.flow-particle');
                particles.forEach(particle => {
                    particle.style.animationDuration = (15 / flowRate) + 's';
                });
            }
            else if (currentMethod === 'forced') {
                airFlow.style.display = 'none';
                liquidFlow.style.display = 'none';
                forcedFlow.style.display = 'block';
                fanIndicator.style.display = 'flex';
                flowDirection.style.display = 'flex';
                
                // 调整强制对流流动速度
                const arrows = forcedFlow.querySelectorAll('.flow-arrow');
                const streamlines = forcedFlow.querySelectorAll('.streamline');
                
                arrows.forEach(arrow => {
                    arrow.style.animationDuration = (8 / flowRate) + 's';
                });
                
                streamlines.forEach(streamline => {
                    streamline.style.animationDuration = (12 / flowRate) + 's';
                });
                
                // 调整风扇旋转速度
                fanIndicator.style.animationDuration = (2 / flowRate) + 's';
            }
        }
        
        // 更新公式显示
        function updateFormulaDisplay(h, A, deltaT, Q, method, areaData) {
            const formulaElement = document.getElementById('formula');
            const explanationElement = document.getElementById('formulaExplanation');
            
            // 格式化数值
            const hFormatted = h.toFixed(1);
            const AFormatted = A.toFixed(2);
            const QFormatted = Math.round(Q);
            
            formulaElement.innerHTML = `
                Q = h × A × ΔT = ${hFormatted} × ${AFormatted} × ${deltaT}<br>
                <span style="font-size: 1.2rem;">Q = ${QFormatted} W</span>
            `;
            
            // 获取当前介质和材料信息
            const medium = coolingMedia[currentMedium];
            const material = materials[currentMaterial];
            
            explanationElement.innerHTML = `
                <strong>牛顿冷却定律：</strong>散热功率Q与传热系数h、散热面积A和温差ΔT成正比。<br>
                <strong>当前参数：</strong>传热系数 h = ${hFormatted} W/m²·K，散热面积 A = ${AFormatted} m²，温差 ΔT = ${deltaT} K。<br>
                <strong>散热功率：</strong>Q = ${QFormatted} W。<br>
                <strong>传热系数影响因素：</strong>散热方式(${method.name})、流速(${document.getElementById('flowRateSlider').value} m/s)、介质(${medium.name})。<br>
                <strong>面积影响：</strong>当前面积：${areaData.name} (${AFormatted} m²)。<br>
                <strong>温差影响：</strong>热源${document.getElementById('heatTempSlider').value}°C - 环境${document.getElementById('ambientTempSlider').value}°C = ${deltaT} K。
            `;
        }
        
        // 初始化测试系统
        function initTestSystem() {
            // 为每个选项添加点击事件
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.test-question');
                    const options = question.querySelectorAll('.option');
                    
                    // 移除该问题所有选项的选择状态
                    options.forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // 设置当前选项为选中状态
                    this.classList.add('selected');
                });
            });
            
            // 提交测试按钮
            document.getElementById('submitTest').addEventListener('click', function() {
                submitTest();
            });
            
            // 重置测试按钮
            document.getElementById('resetTest').addEventListener('click', function() {
                resetTest();
            });
            
            // 重新测试按钮
            document.getElementById('retryTest').addEventListener('click', function() {
                resetTest();
                document.getElementById('resultPanel').style.display = 'none';
            });
            
            // 返回模拟器按钮
            document.getElementById('backToSimulation').addEventListener('click', function() {
                goToPage(1);
            });
        }
        
        // 初始化页面导航
        function initPageNavigation() {
            // 下一步按钮
            document.getElementById('nextButton').addEventListener('click', function() {
                goToPage(2);
            });
            
            // 返回按钮
            document.getElementById('backButton').addEventListener('click', function() {
                goToPage(1);
            });
            
            // 页面指示器点击
            document.querySelectorAll('.page-dot').forEach(dot => {
                dot.addEventListener('click', function() {
                    const pageNum = parseInt(this.getAttribute('data-page'));
                    goToPage(pageNum);
                });
            });
        }
        
        // 切换页面
        function goToPage(pageNum) {
            // 更新当前页面
            currentPage = pageNum;
            
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            document.getElementById(`page${pageNum}`).classList.add('active');
            
            // 更新页面指示器
            document.querySelectorAll('.page-dot').forEach(dot => {
                if (parseInt(dot.getAttribute('data-page')) === pageNum) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }
        
        // 提交测试
        function submitTest() {
            let score = 0;
            const questions = document.querySelectorAll('.test-question');
            
            // 检查每个问题的答案
            questions.forEach(question => {
                const questionId = question.id;
                const selectedOption = question.querySelector('.option.selected');
                
                if (selectedOption) {
                    const userAnswer = selectedOption.getAttribute('data-value');
                    const correctAnswer = correctAnswers[questionId];
                    
                    // 清除之前的正确/错误标记
                    const options = question.querySelectorAll('.option');
                    options.forEach(opt => {
                        opt.classList.remove('correct', 'incorrect');
                    });
                    
                    // 标记正确答案
                    const correctOption = question.querySelector(`.option[data-value="${correctAnswer}"]`);
                    correctOption.classList.add('correct');
                    
                    // 检查用户答案
                    if (userAnswer === correctAnswer) {
                        score++;
                        selectedOption.classList.add('correct');
                    } else {
                        selectedOption.classList.add('incorrect');
                    }
                }
            });
            
            // 计算得分并显示结果
            displayTestResult(score);
        }
        
        // 显示测试结果
        function displayTestResult(score) {
            const resultPanel = document.getElementById('resultPanel');
            const scoreValue = document.getElementById('scoreValue');
            const engineerLevel = document.getElementById('engineerLevel');
            const resultDescription = document.getElementById('resultDescription');
            
            // 设置得分
            scoreValue.textContent = score;
            
            // 确定工程师等级
            let level, levelClass;
            if (score <= 2) {
                level = levelDescriptions.beginner;
                levelClass = 'level-beginner';
            } else if (score <= 4) {
                level = levelDescriptions.engineer;
                levelClass = 'level-engineer';
            } else {
                level = levelDescriptions.expert;
                levelClass = 'level-expert';
            }
            
            // 更新显示
            engineerLevel.textContent = level.title;
            engineerLevel.className = `engineer-level ${levelClass}`;
            resultDescription.textContent = level.description;
            
            // 显示结果面板
            resultPanel.style.display = 'block';
            
            // 滚动到结果面板
            resultPanel.scrollIntoView({ behavior: 'smooth' });
        }
        
        // 重置测试
        function resetTest() {
            // 清除所有选择
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // 隐藏结果面板
            document.getElementById('resultPanel').style.display = 'none';
        }
    </script>
</body>
</html>