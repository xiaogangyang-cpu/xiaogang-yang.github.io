<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é¦™è•‰çƒï¼ˆMagnus æ•ˆåº”ï¼‰â€” ä¼¯åŠªåˆ©æ–¹ç¨‹äº¤äº’å®éªŒ</title>
  <style>
    :root {
      --primary-color: #3b82f6;
      --primary-dark: #1d4ed8;
      --primary-light: #60a5fa;
      --secondary-color: #8b5cf6;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
      --bg-dark: #0b1220;
      --bg-card: #1e293b;
      --bg-card-light: rgba(30, 41, 59, 0.7);
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;
      --border-color: #334155;
      --glow-blue: rgba(59, 130, 246, 0.3);
      --glow-purple: rgba(139, 92, 246, 0.3);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: all 0.3s ease;
    }
    
    body { 
      margin: 0;
      font-family: 'Segoe UI', 'Microsoft YaHei', system-ui, sans-serif;
      background: linear-gradient(135deg, var(--bg-dark) 0%, #1a1f2e 100%);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    
    /* èƒŒæ™¯è£…é¥° */
    .bg-pattern {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(239, 68, 68, 0.03) 0%, transparent 40%);
      z-index: -1;
    }
    
    /* å¤´éƒ¨ */
    .header {
      text-align: center;
      padding: 1.5rem 2rem;
      background: linear-gradient(90deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.8));
      border-bottom: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      position: relative;
      z-index: 10;
    }
    
    .header h1 {
      font-size: 2.2rem;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
      font-weight: 700;
    }
    
    .header p {
      color: var(--text-secondary);
      max-width: 800px;
      margin: 0 auto;
      font-size: 1.1rem;
      line-height: 1.5;
    }
    
    /* ä¸»å†…å®¹åŒº */
    .main-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      padding: 2rem;
      max-width: 1600px;
      margin: 0 auto;
    }
    
    /* å·¦ä¾§æ§åˆ¶é¢æ¿ */
    .control-panel {
      flex: 1;
      min-width: 320px;
      background: var(--bg-card-light);
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
      height: fit-content;
      position: relative;
      z-index: 5;
    }
    
    .control-panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
    }
    
    .panel-header {
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .panel-title {
      font-size: 1.5rem;
      color: var(--primary-light);
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    
    .panel-subtitle {
      font-size: 0.95rem;
      color: var(--text-muted);
      font-style: italic;
    }
    
    /* æ§åˆ¶ç»„ */
    .control-group {
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: rgba(15, 23, 42, 0.5);
      border-radius: 12px;
      border: 1px solid rgba(71, 85, 105, 0.3);
    }
    
    .control-group label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.75rem;
      color: var(--text-secondary);
      font-size: 1rem;
    }
    
    input[type=range] { 
      width: 100%; 
      height: 8px;
      border-radius: 4px;
      background: linear-gradient(90deg, #1e293b, #334155);
      outline: none;
      -webkit-appearance: none;
      cursor: pointer;
      border: 1px solid #475569;
    }
    
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 22px;
      height: 22px;
      background: var(--primary-color);
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 0 10px var(--glow-blue);
      transition: all 0.2s;
    }
    
    input[type=range]::-webkit-slider-thumb:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px var(--glow-blue);
    }
    
    .value-display {
      display: flex;
      justify-content: space-between;
      margin-top: 0.75rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }
    
    .current-value {
      color: var(--primary-light);
      font-weight: 600;
      font-family: 'Consolas', monospace;
      font-size: 1.1rem;
    }
    
    .toggle-group {
      display: flex;
      align-items: center;
      margin: 1.5rem 0;
      padding: 1rem;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 12px;
      border: 1px solid rgba(71, 85, 105, 0.3);
    }
    
    .toggle-group label {
      margin: 0;
      flex: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      color: var(--text-secondary);
      font-weight: 500;
    }
    
    .toggle-group input[type="checkbox"] {
      margin-right: 12px;
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--primary-color);
    }
    
    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    .action-btn {
      flex: 1;
      padding: 1rem;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.2s;
    }
    
    .action-btn:hover {
      transform: translateY(-2px);
    }
    
    #evaluateBtn {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }
    
    #evaluateBtn:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.5);
    }
    
    #resetBtn {
      background: rgba(71, 85, 105, 0.5);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }
    
    #resetBtn:hover {
      background: rgba(71, 85, 105, 0.8);
    }
    
    /* ç”»å¸ƒåŒºåŸŸ */
    .canvas-container {
      flex: 2;
      min-width: 500px;
      background: rgba(15, 23, 42, 0.5);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      position: relative;
    }
    
    #c {
      display: block;
      width: 100%;
      height: 100%;
      min-height: 600px;
      background: linear-gradient(180deg, #0a1429 0%, #1a264a 100%);
    }
    
    /* å¯è§†åŒ–æç¤º */
    .visualization-hint {
      position: absolute;
      bottom: 1.5rem;
      left: 1.5rem;
      background: rgba(15, 23, 42, 0.8);
      padding: 1rem 1.5rem;
      border-radius: 12px;
      font-size: 0.9rem;
      color: var(--text-secondary);
      border: 1px solid var(--border-color);
      max-width: 300px;
      backdrop-filter: blur(5px);
      z-index: 5;
    }
    
    .hint-title {
      color: var(--primary-light);
      font-weight: 600;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1rem;
    }
    
    .hint-item {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .hint-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 0.75rem;
    }
    
    .hint-blue {
      background-color: var(--primary-color);
      box-shadow: 0 0 8px var(--glow-blue);
    }
    
    .hint-red {
      background-color: var(--danger-color);
      box-shadow: 0 0 8px rgba(239, 68, 68, 0.3);
    }
    
    .hint-purple {
      background-color: var(--secondary-color);
      box-shadow: 0 0 8px var(--glow-purple);
    }
    
    /* è¯„æµ‹å¼¹çª— */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 900px;
      max-height: 90vh;
      background: var(--bg-card);
      border-radius: 20px;
      z-index: 1001;
      overflow: hidden;
      border: 2px solid var(--primary-color);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
    }
    
    .modal-header {
      background: linear-gradient(90deg, var(--primary-dark), var(--primary-color));
      padding: 1.5rem 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .modal-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
      color: white;
    }
    
    .modal-subtitle {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.8);
      margin-top: 0.5rem;
    }
    
    .modal-content {
      padding: 2rem;
      overflow-y: auto;
      max-height: 60vh;
    }
    
    .evaluation-section {
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 12px;
      border: 1px solid rgba(71, 85, 105, 0.3);
    }
    
    .section-title {
      font-size: 1.3rem;
      color: var(--primary-light);
      margin-top: 0;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid rgba(96, 165, 250, 0.3);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .parameter-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }
    
    .parameter-card {
      background: rgba(15, 23, 42, 0.7);
      padding: 1rem;
      border-radius: 10px;
      border-left: 4px solid var(--primary-color);
    }
    
    .param-name {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }
    
    .param-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary-light);
      font-family: 'Consolas', monospace;
    }
    
    .formula-box {
      background: rgba(15, 23, 42, 0.8);
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
      margin: 1.5rem 0;
      border: 1px dashed var(--primary-color);
    }
    
    .formula {
      font-family: 'Cambria Math', 'Times New Roman', serif;
      font-size: 1.6rem;
      color: var(--primary-light);
      margin: 0.75rem 0;
    }
    
    .formula-note {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-top: 0.75rem;
      font-style: italic;
    }
    
    .explanation {
      line-height: 1.6;
      color: var(--text-secondary);
      margin-bottom: 1rem;
    }
    
    .highlight {
      color: var(--warning-color);
      font-weight: 600;
    }
    
    .trajectory-comparison {
      display: flex;
      justify-content: space-between;
      margin: 1.5rem 0;
      gap: 1.5rem;
    }
    
    .trajectory-card {
      flex: 1;
      background: rgba(15, 23, 42, 0.7);
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
      border: 1px solid rgba(71, 85, 105, 0.3);
    }
    
    .trajectory-title {
      font-size: 1.1rem;
      color: var(--primary-light);
      margin-bottom: 1rem;
    }
    
    .trajectory-value {
      font-size: 1.3rem;
      font-weight: 700;
      margin: 0.75rem 0;
    }
    
    .positive {
      color: var(--success-color);
    }
    
    .negative {
      color: var(--danger-color);
    }
    
    .magnus-effect {
      color: var(--secondary-color);
    }
    
    .bernoulli-effect {
      color: var(--primary-color);
    }
    
    .close-btn {
      display: block;
      width: 100%;
      padding: 1.25rem;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 0 0 18px 18px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .close-btn:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
    }
    
    /* åº•éƒ¨ä¿¡æ¯æ  */
    .footer {
      text-align: center;
      padding: 1.5rem 2rem;
      color: var(--text-primary);
      font-size: 0.9rem;
      border-top: 2px solid rgba(59, 130, 246, 0.5);
      background: linear-gradient(135deg, rgba(11, 18, 32, 0.95), rgba(30, 41, 59, 0.9));
      margin-top: 2rem;
      position: relative;
      overflow: hidden;
      box-sizing: border-box;
      width: 100%;
    }
    
    .footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-light), var(--primary-color));
    }
    
    .footer-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 0.75rem;
      color: var(--primary-color);
    }
    
    .footer-info {
      margin-bottom: 0.75rem;
      color: var(--text-secondary);
    }
    
    .footer-copyright {
      color: var(--warning-color);
      font-weight: bold;
      font-size: 1rem;
      margin-top: 1rem;
    }
    
    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 1100px) {
      .main-container {
        flex-direction: column;
      }
      
      .canvas-container, .control-panel {
        min-width: 100%;
      }
      
      .canvas-container {
        order: 1;
      }
      
      .control-panel {
        order: 2;
      }
    }
    
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8rem;
      }
      
      .header p {
        font-size: 1rem;
      }
      
      .main-container {
        padding: 1rem;
        gap: 1.5rem;
      }
      
      .control-panel, .canvas-container {
        border-radius: 12px;
      }
      
      .parameter-grid, .trajectory-comparison {
        grid-template-columns: 1fr;
      }
      
      .trajectory-comparison {
        flex-direction: column;
      }
      
      .visualization-hint {
        position: static;
        max-width: 100%;
        margin: 1.5rem;
      }
      
      .modal {
        width: 95%;
        max-height: 85vh;
      }
      
      .modal-content {
        padding: 1.5rem;
      }
      
      .action-buttons {
        flex-direction: column;
      }
    }
    
    @media (max-width: 480px) {
      .header {
        padding: 1rem;
      }
      
      .header h1 {
        font-size: 1.5rem;
      }
      
      .panel-title {
        font-size: 1.3rem;
      }
      
      .modal-title {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="bg-pattern"></div>
  
  <!-- å¤´éƒ¨ -->
  <header class="header">
    <h1>âš½ é¦™è•‰çƒï¼ˆMagnusæ•ˆåº”ï¼‰å®éªŒ</h1>
    <p>é€šè¿‡äº¤äº’å¼æ¨¡æ‹Ÿæ¢ç´¢ä¼¯åŠªåˆ©æ–¹ç¨‹ä¸æ—‹è½¬æµä½“åŠ¨åŠ›å­¦åŸç†ï¼Œè°ƒæ•´å‚æ•°è§‚å¯Ÿè¶³çƒè½¨è¿¹å˜åŒ–</p>
  </header>
  
  <!-- ä¸»å†…å®¹åŒº -->
  <div class="main-container">
    <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
      <div class="panel-header">
        <h2 class="panel-title">å®éªŒå‚æ•°æ§åˆ¶</h2>
        <p class="panel-subtitle">è°ƒæ•´å‚æ•°è§‚å¯ŸMagnusæ•ˆåº”å¦‚ä½•å½±å“è¶³çƒè½¨è¿¹</p>
      </div>
      
      <div class="control-group">
        <label>è‡ªè½¬è§’é€Ÿåº¦ Ï‰ (rad/s)</label>
        <input id="spin" type="range" min="-6" max="6" step="0.1" value="3" />
        <div class="value-display">
          <span>é€†æ—¶é’ˆæ—‹è½¬</span>
          <span id="spinValue" class="current-value">3.0</span>
          <span>é¡ºæ—¶é’ˆæ—‹è½¬</span>
        </div>
      </div>
      
      <div class="control-group">
        <label>åˆå§‹å¹³åŠ¨é€Ÿåº¦ v (m/s)</label>
        <input id="speed" type="range" min="2" max="8" step="0.1" value="4" />
        <div class="value-display">
          <span>æ…¢</span>
          <span id="speedValue" class="current-value">4.0</span>
          <span>å¿«</span>
        </div>
      </div>
      
      <div class="toggle-group">
        <label>
          <input type="checkbox" id="toggleSpin" checked /> 
          å¯ç”¨æ—‹è½¬ï¼ˆMagnusæ•ˆåº”ï¼‰
        </label>
      </div>
      
      <div class="action-buttons">
        <button id="evaluateBtn" class="action-btn">ğŸ” ä¼¯åŠªåˆ©æ–¹ç¨‹è¯„æµ‹</button>
        <button id="resetBtn" class="action-btn">â†º é‡ç½®å®éªŒ</button>
      </div>
    </div>
    
    <!-- å³ä¾§ç”»å¸ƒåŒºåŸŸ -->
    <div class="canvas-container">
      <canvas id="c"></canvas>
      
      <!-- å¯è§†åŒ–æç¤º -->
      <div class="visualization-hint">
        <div class="hint-title">ğŸ’¡ å¯è§†åŒ–æç¤º</div>
        <div class="hint-item">
          <div class="hint-color hint-blue"></div>
          <div>è“è‰²ç®­å¤´ï¼šé€Ÿåº¦æ–¹å‘</div>
        </div>
        <div class="hint-item">
          <div class="hint-color hint-red"></div>
          <div>çº¢è‰²ç®­å¤´ï¼šMagnusåŠ›æ–¹å‘</div>
        </div>
        <div class="hint-item">
          <div class="hint-color hint-purple"></div>
          <div>æµçº¿ï¼šæ˜¾ç¤ºæ°”æµåˆ†å¸ƒ</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- åº•éƒ¨ä¿¡æ¯æ  -->
  <footer class="footer">
    <div class="footer-title">é¦™è•‰çƒä¸ä¼¯åŠªåˆ©æ–¹ç¨‹äº¤äº’å®éªŒå®¤ Â© 2025 | æµä½“åŠ¨åŠ›å­¦å®éªŒç³»ç»Ÿ | ç‰ˆæœ¬ 1.0 | é‚®ç®±:</strong> xgyanger@qq.com</div>
    <div class="footer-copyright">ç‰ˆæƒÂ©2025 AIknow. ä¿ç•™æ‰€æœ‰æƒåˆ© | Copyright Â©2025 AIknow. All rights reserved.</div>
  </footer>
  
  <!-- è¯„æµ‹å¼¹çª— -->
  <div id="modalOverlay" class="modal-overlay"></div>
  <div id="evaluationModal" class="modal">
    <div class="modal-header">
      <div class="modal-title">ä¼¯åŠªåˆ©æ–¹ç¨‹ä¸é¦™è•‰çƒæ•ˆåº”è¯„æµ‹æŠ¥å‘Š</div>
      <div class="modal-subtitle">åŸºäºå½“å‰å®éªŒå‚æ•°çš„ç‰©ç†å­¦åˆ†æ</div>
    </div>
    
    <div class="modal-content">
      <div class="evaluation-section">
        <h3 class="section-title">ğŸ“Š å½“å‰å®éªŒå‚æ•°</h3>
        <div class="parameter-grid">
          <div class="parameter-card">
            <div class="param-name">è‡ªè½¬è§’é€Ÿåº¦ Ï‰</div>
            <div id="evalSpin" class="param-value">3.0 rad/s</div>
            <div class="param-name">æ—‹è½¬æ–¹å‘</div>
            <div id="evalDirection" class="param-value">é€†æ—¶é’ˆ</div>
          </div>
          
          <div class="parameter-card">
            <div class="param-name">å¹³åŠ¨é€Ÿåº¦ v</div>
            <div id="evalSpeed" class="param-value">4.0 m/s</div>
            <div class="param-name">é©¬èµ«æ•°ä¼°ç®—</div>
            <div id="evalMach" class="param-value">0.012</div>
          </div>
          
          <div class="parameter-card">
            <div class="param-name">æ—‹è½¬çŠ¶æ€</div>
            <div id="evalRotationState" class="param-value">å¯ç”¨</div>
            <div class="param-name">Magnusæ•ˆåº”</div>
            <div id="evalMagnusState" class="param-value">æ˜¾è‘—</div>
          </div>
          
          <div class="parameter-card">
            <div class="param-name">é¢„è®¡åè½¬è·ç¦»</div>
            <div id="evalDeflection" class="param-value">2.4 m</div>
            <div class="param-name">é›·è¯ºæ•°ä¼°ç®—</div>
            <div id="evalReynolds" class="param-value">1.2Ã—10âµ</div>
          </div>
        </div>
      </div>
      
      <div class="evaluation-section">
        <h3 class="section-title">ğŸ§  ä¼¯åŠªåˆ©æ–¹ç¨‹åŸç†</h3>
        
        <div class="formula-box">
          <div style="font-size: 1.1rem; color: var(--text-muted); margin-bottom: 10px;">ä¼¯åŠªåˆ©æ–¹ç¨‹ï¼ˆç®€åŒ–å½¢å¼ï¼‰</div>
          <div class="formula">P + Â½ÏvÂ² + Ïgh = å¸¸æ•°</div>
          <div class="formula-note">å…¶ä¸­ P ä¸ºå‹å¼ºï¼ŒÏ ä¸ºæµä½“å¯†åº¦ï¼Œv ä¸ºæµé€Ÿï¼Œg ä¸ºé‡åŠ›åŠ é€Ÿåº¦ï¼Œh ä¸ºé«˜åº¦</div>
        </div>
        
        <p class="explanation">
          åœ¨é¦™è•‰çƒæ•ˆåº”ä¸­ï¼Œæ—‹è½¬çƒä½“å¸¦åŠ¨å‘¨å›´ç©ºæ°”æµåŠ¨ã€‚æ ¹æ®<span class="bernoulli-effect">ä¼¯åŠªåˆ©åŸç†</span>ï¼š
        </p>
        
        <p class="explanation">
          1. çƒä½“<span class="highlight">æ—‹è½¬æ–¹å‘ä¸ç©ºæ°”ç›¸å¯¹è¿åŠ¨æ–¹å‘ç›¸åŒ</span>çš„ä¸€ä¾§ï¼Œç©ºæ°”æµé€ŸåŠ å¿«ï¼Œå‹å¼ºé™ä½ï¼›
        </p>
        
        <p class="explanation">
          2. çƒä½“<span class="highlight">æ—‹è½¬æ–¹å‘ä¸ç©ºæ°”ç›¸å¯¹è¿åŠ¨æ–¹å‘ç›¸å</span>çš„ä¸€ä¾§ï¼Œç©ºæ°”æµé€Ÿå‡æ…¢ï¼Œå‹å¼ºå‡é«˜ï¼›
        </p>
        
        <p class="explanation">
          3. å‹å¼ºå·®äº§ç”Ÿå‚ç›´äºè¿åŠ¨æ–¹å‘çš„<span class="magnus-effect">MagnusåŠ›</span>ï¼Œä½¿çƒä½“è½¨è¿¹å‘ç”Ÿåè½¬ã€‚
        </p>
      </div>
      
      <div class="evaluation-section">
        <h3 class="section-title">âš½ è½¨è¿¹åˆ†æ</h3>
        
        <div class="trajectory-comparison">
          <div class="trajectory-card">
            <div class="trajectory-title">å½“å‰è½¨è¿¹ï¼ˆæœ‰æ—‹è½¬ï¼‰</div>
            <div id="evalCurvedDistance" class="trajectory-value magnus-effect">2.4 m åè½¬</div>
            <div style="font-size: 0.9rem; color: var(--text-muted);">æ°´å¹³ä½ç§»åå‘ç”Ÿæ˜æ˜¾åè½¬</div>
          </div>
          
          <div class="trajectory-card">
            <div class="trajectory-title">å¯¹ç…§è½¨è¿¹ï¼ˆæ— æ—‹è½¬ï¼‰</div>
            <div id="evalStraightDistance" class="trajectory-value">0 m åè½¬</div>
            <div style="font-size: 0.9rem; color: var(--text-muted);">ä¿æŒç›´çº¿è¿åŠ¨ï¼Œæ— ä¾§å‘åè½¬</div>
          </div>
        </div>
        
        <p class="explanation">
          åœ¨å½“å‰å‚æ•°ä¸‹ï¼Œæ—‹è½¬ä½¿çƒä½“è½¨è¿¹å‘ç”Ÿ<span id="evalDeflectionAmount" class="highlight">æ˜æ˜¾å¼¯æ›²</span>ã€‚
          è¿™ç§å¼¯æ›²è½¨è¿¹åœ¨è¶³çƒæ¯”èµ›ä¸­è¢«ç§°ä¸º"é¦™è•‰çƒ"ï¼Œåœ¨ä¹’ä¹“çƒã€ç½‘çƒç­‰è¿åŠ¨ä¸­ä¹Ÿæœ‰ç±»ä¼¼ç°è±¡ã€‚
        </p>
      </div>
      
      <div class="evaluation-section">
        <h3 class="section-title">ğŸ”¬ Magnusæ•ˆåº”å…¬å¼</h3>
        
        <div class="formula-box">
          <div style="font-size: 1.1rem; color: var(--text-muted); margin-bottom: 10px;">MagnusåŠ›è®¡ç®—å…¬å¼</div>
          <div class="formula">F = ÏÂ·vÂ·Ï‰Â·AÂ·C<sub>L</sub></div>
          <div class="formula-note">å…¶ä¸­ Ï ä¸ºç©ºæ°”å¯†åº¦ï¼Œv ä¸ºé€Ÿåº¦ï¼ŒÏ‰ ä¸ºè§’é€Ÿåº¦ï¼ŒA ä¸ºæˆªé¢ç§¯ï¼ŒC<sub>L</sub> ä¸ºå‡åŠ›ç³»æ•°</div>
        </div>
        
        <p class="explanation">
          æ ¹æ®å½“å‰å‚æ•°ä¼°ç®—ï¼ŒMagnusåŠ›å¤§å°çº¦ä¸º <span id="evalMagnusForce" class="highlight">0.85 N</span>ã€‚
          è¿™ä¸ªåŠ›è¶³ä»¥ä½¿æ ‡å‡†è¶³çƒåœ¨<span id="evalFlightTime" class="highlight">1.2 ç§’</span>çš„é£è¡Œæ—¶é—´å†…äº§ç”Ÿæ˜æ˜¾åè½¬ã€‚
        </p>
      </div>
      
      <div class="evaluation-section">
        <h3 class="section-title">ğŸ“ˆ ä¼˜åŒ–å»ºè®®</h3>
        
        <p class="explanation">
          <span class="positive">âœ… å½“å‰è®¾ç½®æ•ˆæœè‰¯å¥½ï¼š</span>æ—‹è½¬ä¸é€Ÿåº¦çš„å¹³è¡¡äº§ç”Ÿäº†æ˜æ˜¾çš„é¦™è•‰çƒæ•ˆåº”ã€‚
        </p>
        
        <p class="explanation">
          <span class="highlight">ğŸ’¡ å®éªŒå»ºè®®ï¼š</span>
        </p>
        
        <p class="explanation">
          1. å°è¯•<span class="bernoulli-effect">å¢åŠ æ—‹è½¬é€Ÿåº¦</span>ä»¥è§‚å¯Ÿæ›´å¼ºçš„åè½¬æ•ˆæœï¼›
        </p>
        
        <p class="explanation">
          2. å°è¯•<span class="bernoulli-effect">é™ä½å¹³åŠ¨é€Ÿåº¦</span>ä»¥è§‚å¯Ÿåœ¨ä½é€Ÿä¸‹ä¼¯åŠªåˆ©æ•ˆåº”æ˜¯å¦ä»ç„¶æ˜¾è‘—ï¼›
        </p>
        
        <p class="explanation">
          3. å…³é—­æ—‹è½¬åŠŸèƒ½ï¼Œå¯¹æ¯”è§‚å¯Ÿæ— Magnusæ•ˆåº”æ—¶çš„ç›´çº¿è½¨è¿¹ã€‚
        </p>
      </div>
    </div>
    
    <button id="closeModal" class="close-btn">è¿”å›å®éªŒ</button>
  </div>
  
  <script>
    // ================= Canvasè®¾ç½® =================
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    
    function resize() { 
      canvas.width = canvas.parentElement.clientWidth; 
      canvas.height = canvas.parentElement.clientHeight; 
    }
    
    window.addEventListener('resize', resize);
    resize();
    
    // ================= æ§ä»¶å…ƒç´  =================
    const spinCtl = document.getElementById('spin');
    const speedCtl = document.getElementById('speed');
    const toggleSpin = document.getElementById('toggleSpin');
    const spinValue = document.getElementById('spinValue');
    const speedValue = document.getElementById('speedValue');
    const evaluateBtn = document.getElementById('evaluateBtn');
    const resetBtn = document.getElementById('resetBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const evaluationModal = document.getElementById('evaluationModal');
    const closeModal = document.getElementById('closeModal');
    
    // ================= ç‰©ç†å‚æ•° =================
    const R = 44; // çƒåŠå¾„ï¼ˆè§†è§‰å°ºå¯¸ï¼‰
    const magnusK = 0.015; // Magnusæ•ˆåº”ç³»æ•°
    const drag = 0.999; // ç©ºæ°”é˜»åŠ›ç³»æ•°
    const airDensity = 1.225; // ç©ºæ°”å¯†åº¦ kg/mÂ³
    const ballRadius = 0.11; // å®é™…è¶³çƒåŠå¾„ m
    const ballArea = Math.PI * ballRadius * ballRadius; // æˆªé¢ç§¯
    
    let mode = 1; // +1 æ­£æ—‹(é€†æ—¶é’ˆ), -1 åæ—‹(é¡ºæ—¶é’ˆ)
    let pause = 0;
    let trajectoryHistory = []; // è®°å½•è½¨è¿¹ç‚¹
    let maxDeflection = 0; // æœ€å¤§åè½¬è·ç¦»
    
    const ball = { x: 0, y: 0, vx: 0, vy: 0, spin: 0 };
    
    // ================= åˆå§‹åŒ–å‡½æ•° =================
    function resetBall() {
      ball.x = -40;
      ball.y = canvas.height * 0.5;
      ball.vx = Number(speedCtl.value) * 70;
      ball.vy = 0;
      ball.spin = toggleSpin.checked ? mode * Math.abs(Number(spinCtl.value)) : 0;
      trajectoryHistory = [];
      maxDeflection = 0;
      
      // è®°å½•åˆå§‹ä½ç½®
      trajectoryHistory.push({ x: ball.x, y: ball.y, spin: ball.spin });
    }
    
    // æ›´æ–°æ˜¾ç¤ºå€¼
    function updateDisplayValues() {
      spinValue.textContent = Math.abs(Number(spinCtl.value)).toFixed(1);
      speedValue.textContent = Number(speedCtl.value).toFixed(1);
    }
    
    // åˆå§‹åŒ–æ˜¾ç¤ºå€¼
    updateDisplayValues();
    
    // æ§ä»¶äº‹ä»¶ç›‘å¬
    spinCtl.addEventListener('input', updateDisplayValues);
    speedCtl.addEventListener('input', updateDisplayValues);
    
    // é‡ç½®æŒ‰é’®
    resetBtn.addEventListener('click', () => {
      mode = 1;
      resetBall();
    });
    
    // ================= è¯„æµ‹åŠŸèƒ½ =================
    evaluateBtn.addEventListener('click', showEvaluation);
    closeModal.addEventListener('click', hideEvaluation);
    modalOverlay.addEventListener('click', hideEvaluation);
    
    function showEvaluation() {
      const spin = Number(spinCtl.value);
      const speed = Number(speedCtl.value);
      const hasSpin = toggleSpin.checked;
      
      // æ›´æ–°è¯„æµ‹å‚æ•°
      document.getElementById('evalSpin').textContent = Math.abs(spin).toFixed(1) + " rad/s";
      document.getElementById('evalDirection').textContent = spin > 0 ? "é€†æ—¶é’ˆ" : (spin < 0 ? "é¡ºæ—¶é’ˆ" : "æ— æ—‹è½¬");
      document.getElementById('evalSpeed').textContent = speed.toFixed(1) + " m/s";
      document.getElementById('evalRotationState').textContent = hasSpin ? "å¯ç”¨" : "ç¦ç”¨";
      
      // è®¡ç®—é©¬èµ«æ•°ï¼ˆå£°é€Ÿâ‰ˆ340m/sï¼‰
      const machNumber = speed / 340;
      document.getElementById('evalMach').textContent = machNumber.toFixed(3);
      
      // è®¡ç®—é›·è¯ºæ•° Re = Ïvd/Î¼
      // ç©ºæ°”ç²˜åº¦Î¼â‰ˆ1.8Ã—10â»âµ PaÂ·sï¼Œè¶³çƒç›´å¾„d=0.22m
      const reynoldsNumber = (airDensity * speed * 0.22) / 1.8e-5;
      document.getElementById('evalReynolds').textContent = (reynoldsNumber / 1e5).toFixed(1) + "Ã—10âµ";
      
      // è®¡ç®—MagnusåŠ› F = ÏÂ·vÂ·Ï‰Â·AÂ·C_L (å‡è®¾C_Lâ‰ˆ1.2)
      const magnusForce = hasSpin ? airDensity * speed * Math.abs(spin) * ballArea * 1.2 : 0;
      document.getElementById('evalMagnusForce').textContent = magnusForce.toFixed(2) + " N";
      
      // è®¡ç®—é¢„è®¡åè½¬è·ç¦»ï¼ˆç®€åŒ–æ¨¡å‹ï¼‰
      const flightTime = canvas.width / (speed * 70); // åƒç´ æ—¶é—´è½¬æ¢ä¸ºå®é™…æ—¶é—´
      const deflection = hasSpin ? 0.5 * (magnusForce / 0.43) * flightTime * flightTime : 0;
      
      // è½¬æ¢ä¸ºå®é™…è·ç¦»ï¼ˆæ¯”ä¾‹å› å­ï¼‰
      const deflectionMeters = deflection * 0.01; // ç®€åŒ–æ¯”ä¾‹
      document.getElementById('evalDeflection').textContent = deflectionMeters.toFixed(1) + " m";
      
      // æ›´æ–°è½¨è¿¹åˆ†æ
      document.getElementById('evalCurvedDistance').textContent = hasSpin ? deflectionMeters.toFixed(1) + " m åè½¬" : "0 m åè½¬";
      document.getElementById('evalStraightDistance').textContent = "0 m åè½¬";
      document.getElementById('evalDeflectionAmount').textContent = deflectionMeters > 1 ? "æ˜æ˜¾" : (deflectionMeters > 0.5 ? "å¯è§‚æµ‹" : "è½»å¾®");
      
      // Magnusæ•ˆåº”çŠ¶æ€
      document.getElementById('evalMagnusState').textContent = 
        hasSpin && Math.abs(spin) > 0.5 ? (Math.abs(spin) > 3 ? "éå¸¸æ˜¾è‘—" : "æ˜¾è‘—") : "è½»å¾®æˆ–æ— ";
      
      document.getElementById('evalFlightTime').textContent = flightTime.toFixed(1) + " ç§’";
      
      // æ˜¾ç¤ºå¼¹çª—
      modalOverlay.style.display = 'block';
      evaluationModal.style.display = 'block';
    }
    
    function hideEvaluation() {
      modalOverlay.style.display = 'none';
      evaluationModal.style.display = 'none';
    }
    
    // ================= ç»˜åˆ¶å‡½æ•° =================
    function drawStreamlines() {
      ctx.strokeStyle = 'rgba(147, 197, 253, 0.35)';
      ctx.lineWidth = 1;
      const omega = ball.spin;
      
      for(let y = 60; y < canvas.height - 60; y += 28) {
        ctx.beginPath();
        for(let x = 0; x < canvas.width; x += 6) {
          const dx = x - ball.x;
          const dy = y - ball.y;
          const r2 = dx * dx + dy * dy;
          const disturb = omega * R * R / Math.max(r2, 2500);
          const yy = y + disturb * dx * 0.4;
          
          if(x === 0) {
            ctx.moveTo(x, yy);
          } else {
            ctx.lineTo(x, yy);
          }
        }
        ctx.stroke();
      }
    }
    
    function drawTrajectory() {
      if (trajectoryHistory.length < 2) return;
      
      ctx.beginPath();
      ctx.moveTo(trajectoryHistory[0].x, trajectoryHistory[0].y);
      
      for (let i = 1; i < trajectoryHistory.length; i++) {
        const point = trajectoryHistory[i];
        ctx.lineTo(point.x, point.y);
      }
      
      ctx.strokeStyle = 'rgba(59, 130, 246, 0.7)';
      ctx.lineWidth = 3;
      ctx.stroke();
      
      // ç»˜åˆ¶è½¨è¿¹ç‚¹
      for (let i = 0; i < trajectoryHistory.length; i += 5) {
        const point = trajectoryHistory[i];
        ctx.beginPath();
        ctx.arc(point.x, point.y, 3, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(59, 130, 246, 0.9)';
        ctx.fill();
      }
    }
    
    function drawBall() {
      ctx.save();
      ctx.translate(ball.x, ball.y);
      drawBall.angle = (drawBall.angle || 0) + ball.spin * 0.02;
      ctx.rotate(drawBall.angle);
      
      // åˆ›å»ºçƒä½“æ¸å˜
      const grd = ctx.createRadialGradient(-6, -6, 6, 0, 0, R);
      grd.addColorStop(0, '#f9fafb');
      grd.addColorStop(0.7, '#9ca3af');
      grd.addColorStop(1, '#6b7280');
      
      ctx.fillStyle = grd;
      ctx.beginPath();
      ctx.arc(0, 0, R, 0, Math.PI * 2);
      ctx.fill();
      
      // ç»˜åˆ¶æ—‹è½¬æ¡çº¹
      ctx.strokeStyle = 'rgba(30, 41, 59, 0.6)';
      ctx.lineWidth = 1.5;
      
      for(let i = 0; i < 6; i++) {
        ctx.beginPath();
        ctx.arc(0, 0, R * 0.75, i * Math.PI / 3, i * Math.PI / 3 + Math.PI / 6);
        ctx.stroke();
      }
      
      // ç»˜åˆ¶æ—‹è½¬æ–¹å‘æŒ‡ç¤ºå™¨
      if (ball.spin !== 0) {
        const direction = ball.spin > 0 ? 1 : -1;
        ctx.fillStyle = direction > 0 ? '#10b981' : '#ef4444';
        ctx.beginPath();
        ctx.arc(0, R * 0.6, 5, 0, Math.PI * 2);
        ctx.fill();
        
        // æ–¹å‘ç®­å¤´
        ctx.fillStyle = direction > 0 ? '#10b981' : '#ef4444';
        ctx.beginPath();
        if (direction > 0) {
          // é€†æ—¶é’ˆç®­å¤´
          ctx.moveTo(8, R * 0.6 - 10);
          ctx.lineTo(-2, R * 0.6);
          ctx.lineTo(8, R * 0.6 + 10);
        } else {
          // é¡ºæ—¶é’ˆç®­å¤´
          ctx.moveTo(-8, R * 0.6 - 10);
          ctx.lineTo(2, R * 0.6);
          ctx.lineTo(-8, R * 0.6 + 10);
        }
        ctx.closePath();
        ctx.fill();
      }
      
      ctx.restore();
    }
    
    function drawVelocityArrow() {
      const x0 = ball.x;
      const y0 = ball.y;
      const speedMagnitude = Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy);
      const scale = 70 / 70; // ç¼©æ”¾å› å­
      const x1 = ball.x + (ball.vx / speedMagnitude) * 70 * scale;
      const y1 = ball.y + (ball.vy / speedMagnitude) * 70 * scale;
      
      ctx.strokeStyle = '#3b82f6';
      ctx.fillStyle = '#3b82f6';
      ctx.lineWidth = 6;
      
      // ä¸»ç®­æ†
      ctx.beginPath();
      ctx.moveTo(x0, y0);
      ctx.lineTo(x1, y1);
      ctx.stroke();
      
      // ç®­å¤´
      const angle = Math.atan2(y1 - y0, x1 - x0);
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x1 - 16 * Math.cos(angle) + 10 * Math.sin(angle), 
                y1 - 16 * Math.sin(angle) - 10 * Math.cos(angle));
      ctx.lineTo(x1 - 16 * Math.cos(angle) - 10 * Math.sin(angle), 
                y1 - 16 * Math.sin(angle) + 10 * Math.cos(angle));
      ctx.closePath();
      ctx.fill();
      
      // é€Ÿåº¦æ ‡ç­¾
      ctx.font = 'bold 16px Segoe UI';
      ctx.fillStyle = '#3b82f6';
      ctx.fillText(`v=${Number(speedCtl.value).toFixed(1)} m/s`, x1 + 10, y1 - 10);
    }
    
    function drawForceArrow(Fy) {
      if(!toggleSpin.checked || Math.abs(Fy) < 0.001) return;
      
      const len = Math.max(-50, Math.min(50, Fy * 140));
      const x0 = ball.x;
      const y0 = ball.y;
      const y1 = ball.y + len;
      
      ctx.strokeStyle = '#ef4444';
      ctx.fillStyle = '#ef4444';
      ctx.lineWidth = 4;
      
      // ä¸»ç®­æ†
      ctx.beginPath();
      ctx.moveTo(x0, y0);
      ctx.lineTo(x0, y1);
      ctx.stroke();
      
      // ç®­å¤´
      const dir = Math.sign(len) || 1;
      ctx.beginPath();
      ctx.moveTo(x0, y1);
      ctx.lineTo(x0 - 10, y1 - dir * 14);
      ctx.lineTo(x0 + 10, y1 - dir * 14);
      ctx.closePath();
      ctx.fill();
      
      // MagnusåŠ›æ ‡ç­¾
      ctx.font = 'bold 16px Segoe UI';
      ctx.fillStyle = '#ef4444';
      const labelY = len > 0 ? y1 + 20 : y1 - 10;
      ctx.fillText(`F_Magnus`, x0 + 15, labelY);
    }
    
    function drawInfoPanel() {
      const spin = Number(spinCtl.value);
      const speed = Number(speedCtl.value);
      const hasSpin = toggleSpin.checked;
      
      // ä¿¡æ¯é¢æ¿èƒŒæ™¯
      ctx.fillStyle = 'rgba(15, 23, 42, 0.4)';
      ctx.fillRect(20, canvas.height - 120, 300, 100);
      ctx.strokeStyle = 'rgba(59, 130, 246, 0.5)';
      ctx.lineWidth = 1;
      ctx.strokeRect(20, canvas.height - 120, 300, 100);
      
      // ä¿¡æ¯æ–‡å­—
      ctx.font = '14px Segoe UI';
      ctx.fillStyle = '#e5e7eb';
      ctx.fillText(`è‡ªè½¬é€Ÿåº¦: ${Math.abs(spin).toFixed(1)} rad/s`, 35, canvas.height - 95);
      ctx.fillStyle = spin > 0 ? '#10b981' : (spin < 0 ? '#ef4444' : '#94a3b8');
      ctx.fillText(`æ–¹å‘: ${spin > 0 ? 'é€†æ—¶é’ˆ' : (spin < 0 ? 'é¡ºæ—¶é’ˆ' : 'æ— æ—‹è½¬')}`, 35, canvas.height - 75);
      
      ctx.fillStyle = '#e5e7eb';
      ctx.fillText(`å¹³åŠ¨é€Ÿåº¦: ${speed.toFixed(1)} m/s`, 35, canvas.height - 55);
      
      if (hasSpin && spin !== 0) {
        ctx.fillStyle = '#8b5cf6';
        ctx.fillText(`Magnusæ•ˆåº”: ${Math.abs(spin) > 3 ? 'å¼º' : 'ä¸­'}`, 35, canvas.height - 35);
      } else {
        ctx.fillStyle = '#94a3b8';
        ctx.fillText(`Magnusæ•ˆåº”: æ— `, 35, canvas.height - 35);
      }
    }
    
    // ================= åŠ¨ç”»å¾ªç¯ =================
    let last = performance.now();
    
    function tick(now) {
      const dt = Math.min(0.02, (now - last) / 1000);
      last = now;
      
      // æ¸…é™¤ç”»å¸ƒ
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // æ›´æ–°æ—‹è½¬ï¼ˆå…è®¸é£è¡Œä¸­åˆ‡æ¢ï¼‰
      ball.spin = toggleSpin.checked ? mode * Math.abs(Number(spinCtl.value)) : 0;
      
      // MagnusåŠ›è®¡ç®—
      const Fy = magnusK * ball.spin * ball.vx;
      ball.vy += Fy * dt;
      
      // ç©ºæ°”é˜»åŠ›
      ball.vx *= drag;
      ball.vy *= drag;
      
      // æ›´æ–°ä½ç½®
      ball.x += ball.vx * dt;
      ball.y += ball.vy * dt;
      
      // è®°å½•è½¨è¿¹
      if (trajectoryHistory.length < 300) {
        trajectoryHistory.push({ x: ball.x, y: ball.y, spin: ball.spin });
      }
      
      // æ›´æ–°æœ€å¤§åè½¬è·ç¦»
      const deflection = Math.abs(ball.y - canvas.height * 0.5);
      if (deflection > maxDeflection) {
        maxDeflection = deflection;
      }
      
      // ç»˜åˆ¶æ‰€æœ‰å…ƒç´ 
      drawStreamlines();
      drawTrajectory();
      drawBall();
      drawVelocityArrow();
      drawForceArrow(Fy);
      drawInfoPanel();
      
      // çƒé£å‡ºè¾¹ç•Œåçš„å¤„ç†
      if(ball.x > canvas.width + 40) {
        pause += dt;
        if(pause > 0.6) {
          mode *= -1; // åˆ‡æ¢æ—‹è½¬æ–¹å‘
          pause = 0;
          resetBall();
        }
      }
      
      requestAnimationFrame(tick);
    }
    
    // åˆå§‹åŒ–
    resetBall();
    requestAnimationFrame(tick);
  </script>
</body>
</html>